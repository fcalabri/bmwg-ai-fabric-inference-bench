<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Benchmarking Methodology for AI Inference Serving Network Fabrics</title>
<meta content="Fernando Calabria" name="author">
<meta content="Carlos Pignataro" name="author">
<meta content="Qin Wu" name="author">
<meta content="Giuseppe Fioccola" name="author">
<meta content="
       This document defines benchmarking terminology, methodologies, and Key
Performance Indicators (KPIs) for evaluating Ethernet-based AI inference
serving network fabrics. As Large Language Model (LLM) inference deployments
scale to disaggregated prefill/decode architectures spanning hundreds or
thousands of accelerators (GPUs/XPUs), the interconnect fabric becomes the
critical bottleneck determining Time to First Token (TTFT), Inter-Token
Latency (ITL), and aggregate throughput in tokens per second (TPS). This
document establishes vendor-independent, reproducible test procedures for
benchmarking fabric-level performance under realistic AI inference workloads. 
       Coverage includes RDMA-based KV cache transfer between disaggregated prefill
and decode workers, Mixture-of-Experts (MoE) expert parallelism AllToAll
communication, request routing and load balancing for inference serving,
congestion management under bursty inference traffic patterns, and scale/soak
testing. The methodology enables apples-to-apples comparison across
implementations, NIC transport stacks (RoCEv2, UET), and fabric architectures. 
       This document is a companion to  , which addresses training
workloads. 
    " name="description">
<meta content="xml2rfc 3.31.0" name="generator">
<meta content="benchmarking" name="keyword">
<meta content="AI" name="keyword">
<meta content="inference" name="keyword">
<meta content="LLM" name="keyword">
<meta content="network fabric" name="keyword">
<meta content="RDMA" name="keyword">
<meta content="KV cache" name="keyword">
<meta content="MoE" name="keyword">
<meta content="disaggregated serving" name="keyword">
<meta content="draft-calabria-bmwg-ai-fabric-inference-bench-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.31.0
    Python 3.12.12
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.2.1
    Jinja2 3.1.6
    lxml 6.0.2
    platformdirs 4.5.1
    pycountry 24.6.1
    PyYAML 6.0.3
    requests 2.32.5
    wcwidth 0.3.0
-->
<link href="draft-calabria-bmwg-ai-fabric-inference-bench.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
  border-left: 2px var(--pilcrow-strong) solid;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow, a.pilcrow:focus {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">AI Inference Fabric Benchmarking</td>
<td class="right">February 2026</td>
</tr></thead>
<tfoot><tr>
<td class="left">Calabria, et al.</td>
<td class="center">Expires 28 August 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Benchmarking Methodology Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-calabria-bmwg-ai-fabric-inference-bench-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2026-02-24" class="published">24 February 2026</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-08-28">28 August 2026</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">F. Calabria</div>
<div class="org">Cisco</div>
</div>
<div class="author">
      <div class="author-name">C. Pignataro</div>
<div class="org">Blue Fern Consulting</div>
</div>
<div class="author">
      <div class="author-name">Q. Wu</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">G. Fioccola</div>
<div class="org">Huawei</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Benchmarking Methodology for AI Inference Serving Network Fabrics</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines benchmarking terminology, methodologies, and Key
Performance Indicators (KPIs) for evaluating Ethernet-based AI inference
serving network fabrics. As Large Language Model (LLM) inference deployments
scale to disaggregated prefill/decode architectures spanning hundreds or
thousands of accelerators (GPUs/XPUs), the interconnect fabric becomes the
critical bottleneck determining Time to First Token (TTFT), Inter-Token
Latency (ITL), and aggregate throughput in tokens per second (TPS). This
document establishes vendor-independent, reproducible test procedures for
benchmarking fabric-level performance under realistic AI inference workloads.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">Coverage includes RDMA-based KV cache transfer between disaggregated prefill
and decode workers, Mixture-of-Experts (MoE) expert parallelism AllToAll
communication, request routing and load balancing for inference serving,
congestion management under bursty inference traffic patterns, and scale/soak
testing. The methodology enables apples-to-apples comparison across
implementations, NIC transport stacks (RoCEv2, UET), and fabric architectures.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">This document is a companion to <span>[<a href="#TRAINING-BENCH" class="cite xref">TRAINING-BENCH</a>]</span>, which addresses training
workloads.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://fcalabri.github.io/bmwg-ai-fabric-inference-bench/draft-calabria-bmwg-ai-fabric-inference-bench.html">https://fcalabri.github.io/bmwg-ai-fabric-inference-bench/draft-calabria-bmwg-ai-fabric-inference-bench.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-calabria-bmwg-ai-fabric-inference-bench/">https://datatracker.ietf.org/doc/draft-calabria-bmwg-ai-fabric-inference-bench/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        BMWG Working Group mailing list (<span><a href="mailto:bmwg@ietf.org">mailto:bmwg@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/bmwg/">https://mailarchive.ietf.org/arch/browse/bmwg/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/bmwg/">https://www.ietf.org/mailman/listinfo/bmwg/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/fcalabri/bmwg-ai-fabric-inference-bench">https://github.com/fcalabri/bmwg-ai-fabric-inference-bench</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 August 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2026 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-requirements-language" class="internal xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-scope-and-applicability" class="internal xref">Scope and Applicability</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="auto internal xref">1.3</a>.  <a href="#name-relationship-to-existing-bm" class="internal xref">Relationship to Existing BMWG Work</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="auto internal xref">1.4</a>.  <a href="#name-relationship-to-companion-d" class="internal xref">Relationship to Companion Documents</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-terminology-and-definitions" class="internal xref">Terminology and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-test-topology-and-architect" class="internal xref">Test Topology and Architecture</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-reference-fabric-topologies" class="internal xref">Reference Fabric Topologies</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="auto internal xref">3.1.1</a>.  <a href="#name-topology-a-2-tier-clos-leaf" class="internal xref">Topology A: 2-Tier Clos (Leaf-Spine)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.2">
                    <p id="section-toc.1-1.3.2.1.2.2.1"><a href="#section-3.1.2" class="auto internal xref">3.1.2</a>.  <a href="#name-topology-b-3-tier-clos-leaf" class="internal xref">Topology B: 3-Tier Clos (Leaf-Spine-Superspine)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.3">
                    <p id="section-toc.1-1.3.2.1.2.3.1"><a href="#section-3.1.3" class="auto internal xref">3.1.3</a>.  <a href="#name-topology-c-disaggregated-pr" class="internal xref">Topology C: Disaggregated Prefill/Decode Placement</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-disaggregated-prefill-decode" class="internal xref">Disaggregated Prefill/Decode Topology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-device-under-test-dut-ident" class="internal xref">Device Under Test (DUT) Identification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-traffic-generator-and-workl" class="internal xref">Traffic Generator and Workload Emulator Requirements</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="auto internal xref">3.4.1</a>.  <a href="#name-hardware-traffic-generator-" class="internal xref">Hardware Traffic Generator (RT) - Minimum Requirements</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="auto internal xref">3.4.2</a>.  <a href="#name-software-workload-emulator-" class="internal xref">Software Workload Emulator (WE) - Minimum Requirements</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-kpi-framework-and-metrics-t" class="internal xref">KPI Framework and Metrics Taxonomy</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-primary-latency-kpis" class="internal xref">Primary Latency KPIs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-primary-throughput-kpis" class="internal xref">Primary Throughput KPIs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-fabric-level-kpis" class="internal xref">Fabric-Level KPIs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-fabric-health-indicators" class="internal xref">Fabric Health Indicators</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-test-category-1-rdma-kv-cac" class="internal xref">Test Category 1: RDMA KV Cache Transfer Benchmarks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-point-to-point-kv-cache-tra" class="internal xref">Point-to-Point KV Cache Transfer Throughput</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-kv-cache-transfer-latency" class="internal xref">KV Cache Transfer Latency</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-concurrent-kv-cache-transfe" class="internal xref">Concurrent KV Cache Transfer Scaling</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-multi-tier-storage-transfer" class="internal xref">Multi-Tier Storage Transfer Characterization</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-test-category-2-prefill-dec" class="internal xref">Test Category 2: Prefill/Decode Disaggregation Benchmarks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-end-to-end-disaggregated-tt" class="internal xref">End-to-End Disaggregated TTFT</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-xpyd-ratio-optimization" class="internal xref">xPyD Ratio Optimization</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-heterogeneous-parallelism-c" class="internal xref">Heterogeneous Parallelism Configuration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="auto internal xref">6.4</a>.  <a href="#name-prefill-queue-depth-impact-" class="internal xref">Prefill Queue Depth Impact on Transfer Latency</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-test-category-3-moe-expert-" class="internal xref">Test Category 3: MoE Expert Parallelism Benchmarks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-alltoall-dispatch-throughpu" class="internal xref">AllToAll Dispatch Throughput</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-normal-vs-low-latency-dispa" class="internal xref">Normal vs. Low-Latency Dispatch Mode Comparison</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-wide-expert-parallelism-sca" class="internal xref">Wide Expert Parallelism Scaling</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-expert-parallelism-and-kv-c" class="internal xref">Expert Parallelism and KV Cache Transfer Contention</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-test-category-4-congestion-" class="internal xref">Test Category 4: Congestion Management Benchmarks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-ecn-marking-under-inference" class="internal xref">ECN Marking Under Inference Incast</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-pfc-behavior-under-bursty-k" class="internal xref">PFC Behavior Under Bursty KV Cache Transfers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-congestion-control-converge" class="internal xref">Congestion Control Convergence for Mixed Traffic</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.  <a href="#name-pfc-storm-and-deadlock-resi" class="internal xref">PFC Storm and Deadlock Resilience</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-test-category-5-request-rou" class="internal xref">Test Category 5: Request Routing and Load Balancing</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-kv-aware-request-routing-ef" class="internal xref">KV-Aware Request Routing Efficacy</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-prefix-aware-cache-hit-rate" class="internal xref">Prefix-Aware Cache Hit Rate</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.  <a href="#name-ecmp-and-dynamic-load-balan" class="internal xref">ECMP and Dynamic Load Balancing Under Inference Traffic</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="auto internal xref">9.4</a>.  <a href="#name-jain-fairness-index-for-dec" class="internal xref">Jain Fairness Index for Decode Worker Utilization</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-test-category-6-latency-ben" class="internal xref">Test Category 6: Latency Benchmarks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-ttft-under-varying-prompt-l" class="internal xref">TTFT Under Varying Prompt Lengths</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-itl-characterization-and-ta" class="internal xref">ITL Characterization and Tail Latency</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.  <a href="#name-end-to-end-latency-under-mu" class="internal xref">End-to-End Latency Under Multi-Tenant Load</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="auto internal xref">10.4</a>.  <a href="#name-latency-sensitivity-to-fabr" class="internal xref">Latency Sensitivity to Fabric Congestion</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-test-category-7-throughput-" class="internal xref">Test Category 7: Throughput Benchmarks</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-aggregate-tokens-per-second" class="internal xref">Aggregate Tokens Per Second</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-batch-size-scaling-and-cont" class="internal xref">Batch Size Scaling and Continuous Batching Impact</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#section-11.3" class="auto internal xref">11.3</a>.  <a href="#name-goodput-under-preemption-an" class="internal xref">Goodput Under Preemption and Eviction</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-test-category-8-scale-and-a" class="internal xref">Test Category 8: Scale and Autoscaling</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-fabric-scale-limits-for-inf" class="internal xref">Fabric Scale Limits for Inference Clusters</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-dynamic-autoscaling-respons" class="internal xref">Dynamic Autoscaling Response Time</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.3">
                <p id="section-toc.1-1.12.2.3.1"><a href="#section-12.3" class="auto internal xref">12.3</a>.  <a href="#name-link-failure-convergence-im" class="internal xref">Link Failure Convergence Impact on Serving</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-test-category-9-soak-and-st" class="internal xref">Test Category 9: Soak and Stability</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="auto internal xref">13.1</a>.  <a href="#name-24-hour-sustained-inference" class="internal xref">24-Hour Sustained Inference Load</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="auto internal xref">13.2</a>.  <a href="#name-kv-cache-memory-leak-detect" class="internal xref">KV Cache Memory Leak Detection</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#section-13.3" class="auto internal xref">13.3</a>.  <a href="#name-long-running-serving-stabil" class="internal xref">Long-Running Serving Stability</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>. <a href="#name-reporting-format" class="internal xref">Reporting Format</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="auto internal xref">15</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="auto internal xref">16</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-17" class="auto internal xref">17</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.1">
                <p id="section-toc.1-1.17.2.1.1"><a href="#section-17.1" class="auto internal xref">17.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.2">
                <p id="section-toc.1-1.17.2.2.1"><a href="#section-17.2" class="auto internal xref">17.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-kpi-to-test-mapping-summary" class="internal xref">KPI-to-Test Mapping Summary</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-inference-serving-framework" class="internal xref">Inference Serving Framework Capability Categories (Informational)</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-kv-cache-transfer-frame-for" class="internal xref">KV Cache Transfer Frame Format</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.  <a href="#name-moe-alltoall-communication-" class="internal xref">MoE AllToAll Communication Pattern</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22">
            <p id="section-toc.1-1.22.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23">
            <p id="section-toc.1-1.23.1"><a href="#appendix-F" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Large Language Model (LLM) inference serving has emerged as a dominant consumer
of datacenter network capacity, with fundamentally different fabric requirements
compared to training workloads. While training workloads are characterized by
bulk synchronous collective operations (AllReduce, AllGather) with predictable
periodicity, inference workloads exhibit bursty, latency-sensitive
request/response patterns with strict Service Level Objectives (SLOs) on
per-token latency and time-to-first-token.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The advent of disaggregated serving architectures, where the computationally
intensive prefill phase (prompt processing) is physically separated from the
memory-bound decode phase (token generation), introduces a new class of
fabric-critical data movement: KV cache transfer. A single large prompt
processed by a typical large-scale model generates multiple gigabytes of KV
cache state that must be transferred from prefill workers to decode workers
within a fraction of the target TTFT SLO.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">As clusters scale with thousands of concurrent requests, this creates sustained
multi-terabyte-per-second aggregate transfer demands on the fabric.
Simultaneously, Mixture-of-Experts (MoE) architectures introduce expert
parallelism (EP), which distributes expert sub-networks across GPUs and requires
AllToAll communication for token-to-expert routing. Wide EP configurations
(e.g., 96-way EP across 12 nodes of 8 GPUs each) generate fine-grained,
latency-sensitive inter-node traffic that contends with KV cache transfers on
shared fabric links.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">This document defines vendor-independent benchmarking methodologies for
evaluating how well a network fabric supports these inference-specific traffic
patterns. All tests are designed for controlled laboratory environments using
either hardware traffic generators or software workload emulators capable of
reproducing inference serving traffic profiles.<a href="#section-1-4" class="pilcrow">¶</a></p>
<div id="requirements-language">
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="scope-and-applicability">
<section id="section-1.2">
        <h3 id="name-scope-and-applicability">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-scope-and-applicability" class="section-name selfRef">Scope and Applicability</a>
        </h3>
<p id="section-1.2-1">This document addresses the benchmarking of Ethernet-based network fabrics
carrying AI inference serving traffic.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">The scope covers Layer 2/3 fabric performance (switch forwarding, link
utilization, congestion management), RDMA transport performance (one-sided
PUT/GET operations for KV cache transfer, two-sided SEND/RECV for expert
parallelism dispatch), and the interaction between fabric behavior and
application-level inference metrics (TTFT, ITL, TPS).<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.2-3">The document does NOT address benchmarking of individual accelerator (GPU/XPU)
compute performance, model accuracy or quality metrics, benchmarking of the
inference serving software stack in isolation from the fabric, or live
production network testing. All methodologies assume controlled laboratory
conditions per BMWG convention.<a href="#section-1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="relationship-to-existing-bmwg-work">
<section id="section-1.3">
        <h3 id="name-relationship-to-existing-bm">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-relationship-to-existing-bm" class="section-name selfRef">Relationship to Existing BMWG Work</a>
        </h3>
<p id="section-1.3-1">This document builds upon the foundational BMWG benchmarking framework
established by <span>[<a href="#RFC1242" class="cite xref">RFC1242</a>]</span>, <span>[<a href="#RFC2544" class="cite xref">RFC2544</a>]</span>, <span>[<a href="#RFC2889" class="cite xref">RFC2889</a>]</span>, and <span>[<a href="#RFC6349" class="cite xref">RFC6349</a>]</span>.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">The test structure follows RFC 2544 conventions for trial duration (minimum 60
seconds), statistical repetition (minimum 20 trials for latency, 50 for burst),
and reporting format (graphical and tabular).<a href="#section-1.3-2" class="pilcrow">¶</a></p>
<p id="section-1.3-3">The methodologies extend RFC 2544 Section 26 benchmarks (throughput, latency,
frame loss rate, back-to-back frames, system recovery, reset) to
inference-specific scenarios including KV cache transfer, expert parallelism
dispatch, and disaggregated serving request routing.<a href="#section-1.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="relationship-to-companion-documents">
<section id="section-1.4">
        <h3 id="name-relationship-to-companion-d">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-relationship-to-companion-d" class="section-name selfRef">Relationship to Companion Documents</a>
        </h3>
<p id="section-1.4-1">This document is a companion to <span>[<a href="#TRAINING-BENCH" class="cite xref">TRAINING-BENCH</a>]</span>, which defines benchmarking
methodologies for AI training network fabrics. Both documents share common
terminology (Section 2), test topology conventions (Section 3), and reporting
formats (Section 14). Both documents <span class="bcp14">SHOULD</span> be used in conjunction with
<span>[<a href="#TERMINOLOGY" class="cite xref">TERMINOLOGY</a>]</span>, which defines the common terminology base for AI fabric
benchmarking which <span class="bcp14">SHOULD</span> be reused in both documents.<a href="#section-1.4-1" class="pilcrow">¶</a></p>
<p id="section-1.4-2">Where training workloads are dominated by bulk synchronous collective
communication (AllReduce, AllGather) with high bandwidth utilization and
periodic synchronization barriers, inference workloads are dominated by bursty,
latency-sensitive point-to-point transfers (KV cache) and fine-grained AllToAll
dispatch (MoE expert parallelism). Implementers deploying converged fabrics that
serve both training and inference workloads <span class="bcp14">SHOULD</span> run both test suites.<a href="#section-1.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="terminology-and-definitions">
<section id="section-2">
      <h2 id="name-terminology-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology-and-definitions" class="section-name selfRef">Terminology and Definitions</a>
      </h2>
<p id="section-2-1">The following terminologies are used throughout this document. Terms defined in the
companion training document are referenced but not redefined unless the inference
context introduces substantive differences.<a href="#section-2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-2">
        <dt id="section-2-2.1">TTFT:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.2">
          <p id="section-2-2.2.1">Time to First Token. The elapsed time from receipt of an inference request by
the serving system to emission of the first output token. Includes prompt
processing (prefill), KV cache generation, optional KV cache transfer (in
disaggregated architectures), and initial decode step. Target: &lt; 500 ms for
interactive serving.<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.3">ITL:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.4">
          <p id="section-2-2.4.1">Inter-Token Latency. The elapsed time between successive output tokens during
the autoregressive decode phase. Measured at P50, P95, P99, and P99.9
percentiles. Target: &lt; 50 ms P99 for interactive serving.<a href="#section-2-2.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.5">TPS:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.6">
          <p id="section-2-2.6.1">Tokens Per Second. Aggregate throughput of the serving system measured as the
total number of output tokens generated per second across all concurrent
requests. Reported separately for input (prefill) TPS and output (decode) TPS.<a href="#section-2-2.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.7">KV Cache:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.8">
          <p id="section-2-2.8.1">Key-Value Cache. The intermediate attention state (key and value projection
matrices) computed during the prefill phase and reused during each decode step.
Size scales with model dimension, number of layers, number of attention heads,
sequence length, and numerical precision. For a 70B parameter model at FP16
with 4K context: approximately 1.34 GB per request.<a href="#section-2-2.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.9">Prefill Phase:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.10">
          <p id="section-2-2.10.1">The compute-bound phase of inference in which the entire input prompt is
processed in parallel to generate the KV cache and the first output token.
Characterized by high arithmetic intensity (200-400 ops/byte), high GPU
utilization (90-95%), and large activation tensors.<a href="#section-2-2.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.11">Decode Phase:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.12">
          <p id="section-2-2.12.1">The memory-bound phase of inference in which output tokens are generated
autoregressively, one token per forward pass. Characterized by low arithmetic
intensity (60-80 ops/byte), lower GPU utilization (20-40%), and
memory-bandwidth-limited KV cache reads.<a href="#section-2-2.12.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.13">Disaggregated Serving:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.14">
          <p id="section-2-2.14.1">An inference serving architecture in which prefill and decode computations are
executed on physically separate groups of accelerators (workers), connected by
a network fabric. The KV cache generated by prefill workers are transferred
over the fabric to decode workers.<a href="#section-2-2.14.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.15">xPyD Ratio:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.16">
          <p id="section-2-2.16.1">The allocation ratio of prefill (x) to decode (y) resources in a disaggregated
serving cluster. For example, 3P9D indicates 3 prefill nodes and 9 decode
nodes. The optimal ratio depends on model size, prompt length distribution,
output length distribution, and SLO targets.<a href="#section-2-2.16.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.17">EP:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.18">
          <p id="section-2-2.18.1">Expert Parallelism. A parallelism strategy for Mixture-of-Experts (MoE) models
in which expert sub-networks are distributed across multiple GPUs. Token
routing to the appropriate experts requires AllToAll communication.<a href="#section-2-2.18.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.19">Wide EP:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.20">
          <p id="section-2-2.20.1">Expert Parallelism spanning many GPUs (e.g., 96-way EP across 12 nodes),
requiring inter-node AllToAll communication for every MoE layer forward pass.<a href="#section-2-2.20.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.21">DP Attention:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.22">
          <p id="section-2-2.22.1">Data Parallelism applied to the attention computation, where the KV cache is
partitioned across data-parallel ranks. Each rank holds 1/DP_SIZE of the KV
cache, and AllToAll communication is used to exchange attention outputs.<a href="#section-2-2.22.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.23">MoE:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.24">
          <p id="section-2-2.24.1">Mixture of Experts. A model architecture that activates only a subset of
expert sub-networks for each token, enabling larger model capacity with
sub-linear compute scaling.<a href="#section-2-2.24.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.25">Normal Dispatch:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.26">
          <p id="section-2-2.26.1">A communication mode for AllToAll MoE dispatch optimized for the prefill phase.
Maximizes throughput for long input sequences but generates dynamic (symbolic)
shapes incompatible with CUDA Graph.<a href="#section-2-2.26.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.27">Low-Latency Dispatch:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.28">
          <p id="section-2-2.28.1">A communication mode for AllToAll MoE dispatch optimized for the decode phase.
Uses fixed input shapes compatible with CUDA Graph, reducing kernel launch
overhead at the cost of slightly lower peak throughput.<a href="#section-2-2.28.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.29">RDMA:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.30">
          <p id="section-2-2.30.1">Remote Direct Memory Access. A transport mechanism enabling direct
memory-to-memory data transfer between hosts without CPU involvement.
Implementations include InfiniBand Verbs and RoCEv2 (RDMA over Converged
Ethernet v2).<a href="#section-2-2.30.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.31">RoCEv2:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.32">
          <p id="section-2-2.32.1">RDMA over Converged Ethernet version 2. An RDMA transport that encapsulates
InfiniBand transport over UDP/IP, enabling RDMA semantics on standard Ethernet
fabrics.<a href="#section-2-2.32.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.33">UET:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.34">
          <p id="section-2-2.34.1">Ultra Ethernet Transport. A transport protocol defined by the Ultra Ethernet
Consortium (UEC) Specification 1.0, offering ordered/unordered reliable
delivery, multipath packet spraying, and integrated congestion control for
AI/HPC workloads.<a href="#section-2-2.34.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.35">KVCXL:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.36">
          <p id="section-2-2.36.1">KV Cache Transfer Library. A library providing standardized point-to-point
data transfer primitives (register, transfer, notify) for inference engines,
abstracting underlying transports (intra-node interconnect, RDMA, PCIe, and
storage interfaces). Multiple open-source and vendor implementations exist.<a href="#section-2-2.36.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.37">GIN:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.38">
          <p id="section-2-2.38.1">GPU-Initiated Networking. A communication paradigm where GPU threads directly
initiate network operations (RDMA sends, one-sided puts) without CPU
involvement, reducing latency by eliminating CPU-GPU synchronization.<a href="#section-2-2.38.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.39">PagedAttention:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.40">
          <p id="section-2-2.40.1">A memory management technique for KV caches that stores attention keys and
values in fixed-size pages (typically, 16-64 KB), enabling non-contiguous
allocation and reducing memory fragmentation.<a href="#section-2-2.40.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.41">Continuous Batching:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.42">
          <p id="section-2-2.42.1">A scheduling technique that dynamically adds new requests to an active
inference batch as decode slots become available, improving GPU utilization
compared to static batching.<a href="#section-2-2.42.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.43">Prefix Caching:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.44">
          <p id="section-2-2.44.1">Reuse of previously computed KV cache segments for prompts that share a common
prefix (e.g., system prompt), avoiding redundant prefill computation.<a href="#section-2-2.44.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.45">DUT:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.46">
          <p id="section-2-2.46.1">Device Under Test. In this document, the DUT is one or more network fabric
elements (switches, NICs, or the complete fabric) whose performance impact on
inference serving is being characterized.<a href="#section-2-2.46.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.47">SUT:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.48">
          <p id="section-2-2.48.1">System Under Test. The complete inference serving system including
accelerators, NICs, fabric, and serving software, when end-to-end metrics are
being measured.<a href="#section-2-2.48.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.49">RT:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.50">
          <p id="section-2-2.50.1">Router Tester / Traffic Generator. Test equipment capable of generating and
receiving network traffic at specified rates with timestamping accuracy
sufficient for the measurements defined herein.<a href="#section-2-2.50.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="test-topology-and-architecture">
<section id="section-3">
      <h2 id="name-test-topology-and-architect">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-test-topology-and-architect" class="section-name selfRef">Test Topology and Architecture</a>
      </h2>
<div id="reference-fabric-topologies">
<section id="section-3.1">
        <h3 id="name-reference-fabric-topologies">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-reference-fabric-topologies" class="section-name selfRef">Reference Fabric Topologies</a>
        </h3>
<p id="section-3.1-1">The reference topologies from the companion training document (2-Tier Clos,
3-Tier Clos, Rail-Optimized) remain applicable. Inference serving introduces
additional topology considerations related to disaggregated prefill/decode
placement and MoE expert distribution.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<div id="topology-a-2-tier-clos-leaf-spine">
<section id="section-3.1.1">
          <h4 id="name-topology-a-2-tier-clos-leaf">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-topology-a-2-tier-clos-leaf" class="section-name selfRef">Topology A: 2-Tier Clos (Leaf-Spine)</a>
          </h4>
<p id="section-3.1.1-1">Applicable to inference clusters up to approximately 2,048 accelerators. Prefill
and decode worker groups <span class="bcp14">SHOULD</span> be placed on separate leaf switches (or separate
leaf switch groups) to isolate KV cache transfer traffic from decode-to-client
response traffic. Expert parallelism (EP) traffic within a single MoE dispatch
group <span class="bcp14">SHOULD</span> be confined to a single leaf switch or a minimal number of leaf
switches to minimize spine-hop latency.<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="topology-b-3-tier-clos-leaf-spine-superspine">
<section id="section-3.1.2">
          <h4 id="name-topology-b-3-tier-clos-leaf">
<a href="#section-3.1.2" class="section-number selfRef">3.1.2. </a><a href="#name-topology-b-3-tier-clos-leaf" class="section-name selfRef">Topology B: 3-Tier Clos (Leaf-Spine-Superspine)</a>
          </h4>
<p id="section-3.1.2-1">Required for inference clusters exceeding 2,048 accelerators or for multi-model
serving deployments where different model instances occupy different fabric pods.
KV cache transfer traffic between prefill and decode workers in different pods
traverses the superspine tier, making superspine bandwidth and latency critical.<a href="#section-3.1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="topology-c-disaggregated-prefilldecode-placement">
<section id="section-3.1.3">
          <h4 id="name-topology-c-disaggregated-pr">
<a href="#section-3.1.3" class="section-number selfRef">3.1.3. </a><a href="#name-topology-c-disaggregated-pr" class="section-name selfRef">Topology C: Disaggregated Prefill/Decode Placement</a>
          </h4>
<p id="section-3.1.3-1">A topology variant specific to inference serving in which prefill workers and
decode workers are placed in distinct physical locations within the fabric,
connected by a dedicated KV cache transfer network segment. This topology enables
independent scaling of prefill and decode resources and allows heterogeneous
hardware (e.g., high-compute GPUs for prefill, high-memory-bandwidth GPUs for
decode).<a href="#section-3.1.3-1" class="pilcrow">¶</a></p>
<span id="name-disaggregated-prefill-decod"></span><div id="fig-pd-topology">
<figure id="figure-1">
            <div class="alignLeft art-text artwork" id="section-3.1.3-2.1">
<pre>
          +----------------------+
          |   Request Router     |
          |   (KV-Aware LB)      |
          +--------+-------------+
                   |
      +------------+--------------+
      |                           |
+-----v-------+         +---------v-----+
| Prefill Pool|         |  Decode Pool  |
| (xP workers)|         |  (yD workers) |
| High Compute|         | High Mem BW   |
| TP=8, DP=N/8|         | TP=8, DP=M/8  |
+------+------+         +-------+-------+
       |                        |
       |  KV Cache RDMA Transfer|
       |  (One-sided PUT/Signal) |
       +------------------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-disaggregated-prefill-decod" class="selfRef">Disaggregated Prefill/Decode Inference Topology</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="disaggregated-prefilldecode-topology">
<section id="section-3.2">
        <h3 id="name-disaggregated-prefill-decode">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-disaggregated-prefill-decode" class="section-name selfRef">Disaggregated Prefill/Decode Topology</a>
        </h3>
<p id="section-3.2-1">The disaggregated topology separates the inference pipeline into physically
distinct pools connected by the fabric. The test topology <span class="bcp14">MUST</span> include the
following components:<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-2.1">
            <p id="section-3.2-2.1.1"><strong>Prefill Worker Pool:</strong> N Prefill nodes, each containing G accelerators with
high-compute capability. These workers execute the prefill phase and generate
KV cache state. Tensor Parallelism (TP) is applied within each node; Data
Parallelism (DP) is applied across nodes. Each prefill worker communicates
with one or more decode workers via RDMA-based KV cache transfer.<a href="#section-3.2-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-2.2">
            <p id="section-3.2-2.2.1"><strong>Decode Worker Pool:</strong> M Decode nodes, each containing G accelerators with high
memory bandwidth. These workers receive KV cache state from prefill workers and
execute the autoregressive decode phase. DP Attention may partition the KV
cache across DP ranks within the decode pool, requiring AllToAll communication
during decode.<a href="#section-3.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-2.3">
            <p id="section-3.2-2.3.1"><strong>KV Cache Transfer Network:</strong> The fabric segment connecting prefill and decode
pools. This segment carries one-sided RDMA PUT operations (or PUT-with-signal)
transferring KV cache blocks from prefill GPU memory to decode GPU memory.
The KV cache blocks transfer can be intra-node transfer,e.g.,NVLink transfer,
or inter-node transfer,e.g., Ethernet/InfiniBand or NIC-Bound Transfer,e.g.,
 PCIe/CXL transfer.<a href="#section-3.2-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-2.4">
            <p id="section-3.2-2.4.1"><strong>Request Router:</strong> A network-layer or application-layer load balancer that
assigns incoming inference requests to prefill workers and subsequently routes
KV cache to the appropriate decode workers. KV-aware routing and prefix-aware
caching policies are under test.<a href="#section-3.2-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="dut-id">
<section id="section-3.3">
        <h3 id="name-device-under-test-dut-ident">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-device-under-test-dut-ident" class="section-name selfRef">Device Under Test (DUT) Identification</a>
        </h3>
<p id="section-3.3-1">The following table defines the DUT configurations tested in this document:<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<span id="name-dut-configuration-definitio"></span><div id="tab-dut">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-dut-configuration-definitio" class="selfRef">DUT Configuration Definitions</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">DUT ID</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Components Under Test</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">DUT-S</td>
              <td class="text-left" rowspan="1" colspan="1">Single Switch</td>
              <td class="text-left" rowspan="1" colspan="1">Individual leaf or spine switch forwarding inference traffic. Measures per-hop latency, buffer absorption, ECN marking accuracy.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
              <td class="text-left" rowspan="1" colspan="1">Complete Fabric</td>
              <td class="text-left" rowspan="1" colspan="1">End-to-end fabric from prefill NIC egress to decode NIC ingress. Measures fabric-level KV cache transfer latency, throughput, and congestion behavior.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">DUT-N</td>
              <td class="text-left" rowspan="1" colspan="1">NIC Transport</td>
              <td class="text-left" rowspan="1" colspan="1">NIC RDMA transport stack processing KV cache transfer operations. Measures RDMA verb completion latency, one-sided PUT bandwidth, QP scaling.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">DUT-PD</td>
              <td class="text-left" rowspan="1" colspan="1">Prefill-Decode Path</td>
              <td class="text-left" rowspan="1" colspan="1">The complete data path from prefill GPU memory through NIC, fabric, NIC, to decode GPU memory. Measures end-to-end KV cache transfer including NVLink, PCIe, and fabric segments.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
              <td class="text-left" rowspan="1" colspan="1">End-to-End System</td>
              <td class="text-left" rowspan="1" colspan="1">Complete inference serving system including inference serving software, RDMA transfer libraries, fabric, and accelerators. Measures TTFT, ITL, TPS as functions of fabric performance.</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="traffic-generator-and-workload-emulator-requirements">
<section id="section-3.4">
        <h3 id="name-traffic-generator-and-workl">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-traffic-generator-and-workl" class="section-name selfRef">Traffic Generator and Workload Emulator Requirements</a>
        </h3>
<p id="section-3.4-1">Tests in this document require one or both of the following traffic generation
modes. The mode used <span class="bcp14">MUST</span> be documented in all test reports.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<div id="hardware-traffic-generator-rt-minimum-requirements">
<section id="section-3.4.1">
          <h4 id="name-hardware-traffic-generator-">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-hardware-traffic-generator-" class="section-name selfRef">Hardware Traffic Generator (RT) - Minimum Requirements</a>
          </h4>
<p id="section-3.4.1-1">The hardware traffic generator <span class="bcp14">MUST</span> satisfy all of the following:<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4.1-2.1">
              <p id="section-3.4.1-2.1.1">RDMA traffic generation supporting RoCEv2 and, where tested, UET transport;
configurable RDMA verb types (one-sided PUT, PUT-with-signal, two-sided
SEND/RECV).<a href="#section-3.4.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.4.1-2.2">
              <p id="section-3.4.1-2.2.1">Configurable message sizes from 4 KB (minimum KV cache page) to 256 MB
(large KV cache block).<a href="#section-3.4.1-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.4.1-2.3">
              <p id="section-3.4.1-2.3.1">Configurable QP counts from 1 QP to a minimum of 256 QPs per
source-destination port pair.<a href="#section-3.4.1-2.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="software-workload-emulator-we-minimum-requirements">
<section id="section-3.4.2">
          <h4 id="name-software-workload-emulator-">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-software-workload-emulator-" class="section-name selfRef">Software Workload Emulator (WE) - Minimum Requirements</a>
          </h4>
<p id="section-3.4.2-1">A software workload emulator runs on actual accelerators and generates realistic
inference workloads. The WE <span class="bcp14">MUST</span> support all of the following:<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4.2-2.1">
              <p id="section-3.4.2-2.1.1">Configurable prompt length distributions: uniform, Zipf, and trace-replay
modes.<a href="#section-3.4.2-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.4.2-2.2">
              <p id="section-3.4.2-2.2.1">Configurable output length distributions and configurable request arrival
rates: Poisson, bursty, and trace-replay.<a href="#section-3.4.2-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.4.2-2.3">
              <p id="section-3.4.2-2.3.1">Disaggregated prefill/decode execution with actual RDMA-based KV cache
transfering between prefill and decode worker pools.<a href="#section-3.4.2-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.4.2-2.4">
              <p id="section-3.4.2-2.4.1">MoE expert parallelism with actual AllToAll dispatch where MoE-specific tests
(<a href="#test-cat3" class="auto internal xref">Section 7</a>) are performed.<a href="#section-3.4.2-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.4.2-2.5">
              <p id="section-3.4.2-2.5.1">Measurement instrumentation providing per-request TTFT and ITL with timestamp
accuracy &lt;= 1 millisecond.<a href="#section-3.4.2-2.5.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-3.4.2-3">When a software workload emulator is used, the complete software configuration
<span class="bcp14">MUST</span> be documented per <a href="#dut-id" class="auto internal xref">Section 3.3</a>, as framework version, RDMA library version,
and GPU driver version materially affect results.<a href="#section-3.4.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="kpi-framework">
<section id="section-4">
      <h2 id="name-kpi-framework-and-metrics-t">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-kpi-framework-and-metrics-t" class="section-name selfRef">KPI Framework and Metrics Taxonomy</a>
      </h2>
<p id="section-4-1">This section defines the Key Performance Indicators measured across all test
categories. KPIs are organized into four tiers: Primary Latency KPIs
(end-user-facing response time metrics), Primary Throughput KPIs (system-level
capacity metrics), Fabric-Level KPIs (network-specific measurements), and Fabric
Health Indicators (operational monitoring metrics).<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4-2.1">
          <p id="section-4-2.1.1">NOTE: Where numerical reference values appear in the Target column of the KPI
tables below (including TTFT, ITL, and other latency targets), these values are
provided as informational reference points reflecting current industry
observations for interactive inference workloads. They do NOT constitute
benchmarking acceptance criteria or performance requirements. Per the BMWG
charter, the definition of acceptance criteria or performance requirements is
explicitly outside the scope of this Working Group. SLO values cited in this
document are illustrative examples from current industry practice. Implementers
<span class="bcp14">MAY</span> use these values as contextual references when interpreting results; they
<span class="bcp14">MUST NOT</span> be used as pass/fail thresholds in vendor evaluations.
Deployment-specific SLOs will vary by application, model architecture, and
operator requirements.<a href="#section-4-2.1.1" class="pilcrow">¶</a></p>
<p id="section-4-2.1.2">NOTE: Target values in this section are NON-NORMATIVE illustrative reference
points derived from current industry practice as of 2025-2026. They do NOT
constitute benchmarking acceptance criteria or performance requirements. Per
BMWG charter, defining acceptance criteria is explicitly out of scope.
Implementers <span class="bcp14">MAY</span> use these values as contextual references only; they <span class="bcp14">MUST NOT</span>
be used as pass/fail thresholds.<a href="#section-4-2.1.2" class="pilcrow">¶</a></p>
</li>
      </ul>
<div id="primary-latency-kpis">
<section id="section-4.1">
        <h3 id="name-primary-latency-kpis">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-primary-latency-kpis" class="section-name selfRef">Primary Latency KPIs</a>
        </h3>
<span id="name-primary-latency-kpis-2"></span><div id="tab-latency-kpis">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-primary-latency-kpis-2" class="selfRef">Primary Latency KPIs</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">KPI</th>
              <th class="text-left" rowspan="1" colspan="1">Unit</th>
              <th class="text-left" rowspan="1" colspan="1">Definition</th>
              <th class="text-left" rowspan="1" colspan="1">Target (Interactive)</th>
              <th class="text-left" rowspan="1" colspan="1">Measurement Point</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">TTFT</td>
              <td class="text-left" rowspan="1" colspan="1">ms</td>
              <td class="text-left" rowspan="1" colspan="1">Time from request arrival to first output token emission</td>
              <td class="text-left" rowspan="1" colspan="1">&lt; 500 ms P99</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E request/response boundary</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ITL</td>
              <td class="text-left" rowspan="1" colspan="1">ms</td>
              <td class="text-left" rowspan="1" colspan="1">Time between successive output tokens</td>
              <td class="text-left" rowspan="1" colspan="1">&lt; 50 ms P99</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E token emission timestamps</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">TTFT_fabric</td>
              <td class="text-left" rowspan="1" colspan="1">ms</td>
              <td class="text-left" rowspan="1" colspan="1">Fabric contribution to TTFT (KV cache transfer latency)</td>
              <td class="text-left" rowspan="1" colspan="1">&lt; 300 ms P99</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-PD NIC-to-NIC measurement</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ITL_fabric</td>
              <td class="text-left" rowspan="1" colspan="1">ms</td>
              <td class="text-left" rowspan="1" colspan="1">Fabric contribution to ITL (EP dispatch latency per decode step)</td>
              <td class="text-left" rowspan="1" colspan="1">&lt; 5 ms P99</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-F EP dispatch round-trip</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">E2E_latency</td>
              <td class="text-left" rowspan="1" colspan="1">ms</td>
              <td class="text-left" rowspan="1" colspan="1">End-to-end request latency from arrival to completion of all output tokens</td>
              <td class="text-left" rowspan="1" colspan="1">Varies by output length</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E request/response boundary</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="primary-throughput-kpis">
<section id="section-4.2">
        <h3 id="name-primary-throughput-kpis">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-primary-throughput-kpis" class="section-name selfRef">Primary Throughput KPIs</a>
        </h3>
<span id="name-primary-throughput-kpis-2"></span><div id="tab-throughput-kpis">
<table class="center" id="table-3">
          <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-primary-throughput-kpis-2" class="selfRef">Primary Throughput KPIs</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">KPI</th>
              <th class="text-left" rowspan="1" colspan="1">Unit</th>
              <th class="text-left" rowspan="1" colspan="1">Definition</th>
              <th class="text-left" rowspan="1" colspan="1">Measurement Point</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">TPS_input</td>
              <td class="text-left" rowspan="1" colspan="1">tokens/s</td>
              <td class="text-left" rowspan="1" colspan="1">Aggregate input (prefill) tokens processed per second across all workers</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E prefill completion events</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">TPS_output</td>
              <td class="text-left" rowspan="1" colspan="1">tokens/s</td>
              <td class="text-left" rowspan="1" colspan="1">Aggregate output (decode) tokens generated per second across all workers</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E token emission events</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">TPS_per_GPU</td>
              <td class="text-left" rowspan="1" colspan="1">tokens/s/GPU</td>
              <td class="text-left" rowspan="1" colspan="1">Output tokens per second normalized by number of decode GPUs</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E per-worker counters</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Goodput</td>
              <td class="text-left" rowspan="1" colspan="1">tokens/s</td>
              <td class="text-left" rowspan="1" colspan="1">Effective output token rate excluding tokens from preempted, evicted, or failed requests</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E successful completion events</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">KV_BW</td>
              <td class="text-left" rowspan="1" colspan="1">GB/s</td>
              <td class="text-left" rowspan="1" colspan="1">Aggregate KV cache transfer bandwidth between prefill and decode pools</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-PD RDMA counters</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Request_Rate</td>
              <td class="text-left" rowspan="1" colspan="1">req/s</td>
              <td class="text-left" rowspan="1" colspan="1">Maximum sustained request arrival rate meeting all latency SLOs</td>
              <td class="text-left" rowspan="1" colspan="1">SUT-E admission control boundary</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="fabric-level-kpis">
<section id="section-4.3">
        <h3 id="name-fabric-level-kpis">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-fabric-level-kpis" class="section-name selfRef">Fabric-Level KPIs</a>
        </h3>
<span id="name-fabric-level-kpis-2"></span><div id="tab-fabric-kpis">
<table class="center" id="table-4">
          <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-fabric-level-kpis-2" class="selfRef">Fabric-Level KPIs</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">KPI</th>
              <th class="text-left" rowspan="1" colspan="1">Unit</th>
              <th class="text-left" rowspan="1" colspan="1">Definition</th>
              <th class="text-left" rowspan="1" colspan="1">DUT</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">KV_xfer_latency</td>
              <td class="text-left" rowspan="1" colspan="1">us</td>
              <td class="text-left" rowspan="1" colspan="1">One-sided RDMA PUT completion time for a single KV cache block transfer</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-N</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">KV_xfer_bandwidth</td>
              <td class="text-left" rowspan="1" colspan="1">GB/s</td>
              <td class="text-left" rowspan="1" colspan="1">Sustained unidirectional KV cache transfer throughput per NIC port</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-N</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">EP_alltoall_latency</td>
              <td class="text-left" rowspan="1" colspan="1">us</td>
              <td class="text-left" rowspan="1" colspan="1">Round-trip time for a complete MoE expert parallelism AllToAll dispatch</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">EP_alltoall_bandwidth</td>
              <td class="text-left" rowspan="1" colspan="1">GB/s</td>
              <td class="text-left" rowspan="1" colspan="1">Aggregate AllToAll bandwidth across all EP ranks during dispatch</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Fabric_FCT</td>
              <td class="text-left" rowspan="1" colspan="1">us</td>
              <td class="text-left" rowspan="1" colspan="1">Flow completion time for a KV cache transfer flow through the fabric</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Buffer_utilization</td>
              <td class="text-left" rowspan="1" colspan="1">%</td>
              <td class="text-left" rowspan="1" colspan="1">Peak switch buffer utilization during KV cache transfer bursts</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-S</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ECN_marking_rate</td>
              <td class="text-left" rowspan="1" colspan="1">%</td>
              <td class="text-left" rowspan="1" colspan="1">Fraction of packets marked with ECN-CE during inference traffic</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-S</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">PFC_frame_count</td>
              <td class="text-left" rowspan="1" colspan="1">frames</td>
              <td class="text-left" rowspan="1" colspan="1">Number of PFC PAUSE frames generated per unit time</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-S</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Link_utilization</td>
              <td class="text-left" rowspan="1" colspan="1">%</td>
              <td class="text-left" rowspan="1" colspan="1">Average and peak link utilization on fabric links carrying inference traffic</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Packet_drop_rate</td>
              <td class="text-left" rowspan="1" colspan="1">ppm</td>
              <td class="text-left" rowspan="1" colspan="1">Packets dropped per million due to buffer overflow or transport error</td>
              <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="fabric-health-indicators">
<section id="section-4.4">
        <h3 id="name-fabric-health-indicators">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-fabric-health-indicators" class="section-name selfRef">Fabric Health Indicators</a>
        </h3>
<span id="name-fabric-health-indicators-2"></span><div id="tab-health">
<table class="center" id="table-5">
          <caption>
<a href="#table-5" class="selfRef">Table 5</a>:
<a href="#name-fabric-health-indicators-2" class="selfRef">Fabric Health Indicators</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Indicator</th>
              <th class="text-left" rowspan="1" colspan="1">Threshold</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">CPU Utilization (switch)</td>
              <td class="text-left" rowspan="1" colspan="1">&lt; 30%</td>
              <td class="text-left" rowspan="1" colspan="1">Control plane CPU usage on switches under inference traffic load</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Memory Usage (switch)</td>
              <td class="text-left" rowspan="1" colspan="1">&lt; 70%</td>
              <td class="text-left" rowspan="1" colspan="1">TCAM, buffer, and control plane memory usage</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">FEC Error Rate</td>
              <td class="text-left" rowspan="1" colspan="1">&lt; 1e-12 post-FEC BER</td>
              <td class="text-left" rowspan="1" colspan="1">Forward Error Correction effectiveness on fabric links</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">CRC Error Count</td>
              <td class="text-left" rowspan="1" colspan="1">0</td>
              <td class="text-left" rowspan="1" colspan="1">Layer 2 CRC errors on any fabric link</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">BGP/OSPF Stability</td>
              <td class="text-left" rowspan="1" colspan="1">0 flaps</td>
              <td class="text-left" rowspan="1" colspan="1">Routing protocol adjacency stability under inference load</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">NIC QP State</td>
              <td class="text-left" rowspan="1" colspan="1">100% active</td>
              <td class="text-left" rowspan="1" colspan="1">All RDMA Queue Pairs in active state (no error/reset)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">GPU-NIC PCIe BW</td>
              <td class="text-left" rowspan="1" colspan="1">&gt; 90% of theoretical</td>
              <td class="text-left" rowspan="1" colspan="1">PCIe Gen5 x16 bandwidth utilization between GPU and NIC</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
</section>
</div>
<div id="test-category-1-rdma-kv-cache-transfer-benchmarks">
<section id="section-5">
      <h2 id="name-test-category-1-rdma-kv-cac">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-test-category-1-rdma-kv-cac" class="section-name selfRef">Test Category 1: RDMA KV Cache Transfer Benchmarks</a>
      </h2>
<p id="section-5-1">KV cache transfer between disaggregated prefill and decode workers is the
defining fabric workload for inference serving. Unlike training collectives
(AllReduce, AllGather) which are periodic and predictable, KV cache transfers
are event-driven (triggered by prefill completion) and bursty.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="point-to-point-kv-cache-transfer-throughput">
<section id="section-5.1">
        <h3 id="name-point-to-point-kv-cache-tra">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-point-to-point-kv-cache-tra" class="section-name selfRef">Point-to-Point KV Cache Transfer Throughput</a>
        </h3>
<p id="section-5.1-1"><strong>Objective:</strong> To determine the maximum sustained KV cache transfer throughput
between a single prefill worker NIC and a single decode worker NIC across the
DUT fabric.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2"><strong>Procedure:</strong> Configure a single RDMA connection (QP) between the prefill and
decode endpoints. Send a sequence of one-sided RDMA PUT operations with message
sizes corresponding to KV cache block sizes. The message size sequence <span class="bcp14">MUST</span>
include: 64 KB (single attention page), 256 KB, 1 MB, 4 MB, 16 MB, 64 MB,
256 MB (large prompt KV cache), and 1 GB. For each message size, transmit at
the maximum rate sustainable by the NIC for a minimum of 60 seconds per trial.
Repeat for 1, 4, 8, 16, 32, 64, and 128 concurrent QPs. The DUT is the fabric
path from NIC to NIC.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3"><strong>Measurement:</strong> Record throughput (GB/s), CPU utilization on both endpoints,
GPU memory-to-NIC transfer overhead, and NIC hardware offload utilization. The
test <span class="bcp14">MUST</span> be repeated a minimum of 20 times per configuration and the average
reported.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a multi-line graph with
message size (log scale) on the X axis and throughput (GB/s) on the Y axis.
Separate lines for each QP count. A reference line showing theoretical NIC line
rate <span class="bcp14">MUST</span> be included.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="kv-cache-transfer-latency">
<section id="section-5.2">
        <h3 id="name-kv-cache-transfer-latency">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-kv-cache-transfer-latency" class="section-name selfRef">KV Cache Transfer Latency</a>
        </h3>
<p id="section-5.2-1"><strong>Objective:</strong> To determine the latency of individual KV cache block transfers
across the DUT fabric under varying load conditions.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2"><strong>Procedure:</strong> Using the same endpoint configuration as Test 5.1, measure the
completion time of individual RDMA PUT operations. Latency is measured from the
initiation of the PUT verb on the prefill NIC to receipt of the completion
signal on the decode NIC (for PUT-with-signal) or to polling of the remote
completion queue. Measure latency under unloaded conditions (single outstanding
operation) and under loaded conditions (background traffic at 25%, 50%, 75%,
and 90% of fabric capacity). Message sizes <span class="bcp14">MUST</span> include 64 KB, 1 MB, 16 MB,
and 256 MB.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3"><strong>Measurement:</strong> Report latency at P50, P95, P99, and P99.9 percentiles. The
test <span class="bcp14">MUST</span> be repeated a minimum of 20 trials of at least 120 seconds each per
configuration. The difference between P99 and P50 (tail latency spread) <span class="bcp14">SHOULD</span>
be reported as a derived metric.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a table with columns for
message size, background load level, and latency at each percentile. A
complementary CDF plot of latency distribution for selected configurations
<span class="bcp14">SHOULD</span> be included.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="concurrent-kv-cache-transfer-scaling">
<section id="section-5.3">
        <h3 id="name-concurrent-kv-cache-transfe">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-concurrent-kv-cache-transfe" class="section-name selfRef">Concurrent KV Cache Transfer Scaling</a>
        </h3>
<p id="section-5.3-1"><strong>Objective:</strong> To characterize how aggregate KV cache transfer performance
scales as the number of concurrent prefill-to-decode transfer pairs increases.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2"><strong>Procedure:</strong> Configure N concurrent prefill-decode endpoint pairs, where N
ranges from 1 to the maximum supported by the fabric (e.g., 1, 2, 4, 8, 16,
32, 64, 128 pairs). Each pair executes continuous KV cache transfers of 16 MB
messages (representative of a medium-length prompt). Measure aggregate
throughput and per-pair latency as N increases.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3"><strong>Measurement:</strong> Report aggregate throughput (GB/s), per-pair median latency
(us), per-pair P99 latency (us), Jain Fairness Index across pairs, and maximum
fabric link utilization observed. The test <span class="bcp14">MUST</span> be repeated a minimum of 20
times per value of N.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<p id="section-5.3-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a dual-axis graph with N
(concurrent pairs) on the X axis, aggregate throughput on the left Y axis, and
P99 latency on the right Y axis. The JFI value for each N <span class="bcp14">SHOULD</span> be annotated.<a href="#section-5.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multi-tier-storage-transfer-characterization">
<section id="section-5.4">
        <h3 id="name-multi-tier-storage-transfer">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-multi-tier-storage-transfer" class="section-name selfRef">Multi-Tier Storage Transfer Characterization</a>
        </h3>
<p id="section-5.4-1"><strong>Objective:</strong> To characterize KV cache transfer performance across the
memory/storage hierarchy: GPU HBM to GPU HBM (inter-node RDMA), GPU HBM to
remote CPU DRAM (offload), CPU DRAM to GPU HBM (reload), and GPU HBM to
NVMe/SSD (persistent cache).<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2"><strong>Procedure:</strong> For each tier pair, measure unidirectional transfer throughput
and latency for message sizes of 1 MB, 16 MB, and 256 MB. Use zero-copy
transfers where supported (GDS for NVMe, GPUDirect RDMA for inter-node).<a href="#section-5.4-2" class="pilcrow">¶</a></p>
<p id="section-5.4-3"><strong>Measurement:</strong> Report throughput (GB/s) and latency (P50, P99) for each tier
pair and message size. Report the tier throughput ratio relative to GPU-to-GPU
RDMA as a derived metric.<a href="#section-5.4-3" class="pilcrow">¶</a></p>
<p id="section-5.4-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a table with rows for each
tier pair and columns for throughput and latency at each message size.<a href="#section-5.4-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-category-2-prefilldecode-disaggregation-benchmarks">
<section id="section-6">
      <h2 id="name-test-category-2-prefill-dec">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-test-category-2-prefill-dec" class="section-name selfRef">Test Category 2: Prefill/Decode Disaggregation Benchmarks</a>
      </h2>
<p id="section-6-1">Disaggregated prefill/decode serving separates the two phases onto distinct
hardware pools to enable independent optimization and scaling. This section
benchmarks the fabric's ability to support the resulting KV cache transfer
traffic patterns and their impact on end-to-end inference metrics.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="end-to-end-disaggregated-ttft">
<section id="section-6.1">
        <h3 id="name-end-to-end-disaggregated-tt">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-end-to-end-disaggregated-tt" class="section-name selfRef">End-to-End Disaggregated TTFT</a>
        </h3>
<p id="section-6.1-1"><strong>Objective:</strong> To measure TTFT as a function of prompt length in a disaggregated
serving configuration, isolating the fabric contribution.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2"><strong>Procedure:</strong> Configure a disaggregated serving system (SUT-E) with a specified
xPyD ratio (e.g., 3P9D for a 12-node cluster). Submit inference requests with
prompt lengths of 128, 512, 1024, 2048, 4096, 8192, and 16384 tokens. For each
prompt length, measure the total TTFT and decompose it into: T_prefill (prefill
compute time), T_transfer (KV cache fabric transfer time, measured at DUT-PD),
and T_decode_init (first decode step time).<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3"><strong>Measurement:</strong> Report TTFT (ms) and its decomposition at P50, P95, and P99
percentiles. The ratio T_transfer/TTFT (fabric fraction) <span class="bcp14">SHOULD</span> be reported as
a derived metric. The test <span class="bcp14">MUST</span> be repeated a minimum of 20 trials per prompt
length.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
<p id="section-6.1-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a stacked bar chart with
prompt length on the X axis and TTFT (ms) on the Y axis, with bars decomposed
into T_prefill, T_transfer, and T_decode_init. A table of numerical values <span class="bcp14">MUST</span>
accompany the chart.<a href="#section-6.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="xpyd-ratio-optimization">
<section id="section-6.2">
        <h3 id="name-xpyd-ratio-optimization">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-xpyd-ratio-optimization" class="section-name selfRef">xPyD Ratio Optimization</a>
        </h3>
<p id="section-6.2-1"><strong>Objective:</strong> To determine the optimal prefill-to-decode resource ratio for a
given model, prompt distribution, and latency SLO, as limited by fabric transfer
capacity.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2"><strong>Procedure:</strong> For a fixed total number of nodes N (e.g., 12), iterate over
xPyD ratios: 1P11D, 2P10D, 3P9D, 4P8D, 6P6D, 8P4D, 10P2D, 11P1D. For each
ratio, submit a sustained request stream matching a target request rate with a
specified prompt length distribution (e.g., Zipf with alpha=1.0 over
[128, 8192] tokens). Measure TTFT P99, ITL P99, TPS_output, and Goodput for
each configuration.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3"><strong>Measurement:</strong> Report all four metrics for each xPyD ratio and request rate.
Identify the Pareto-optimal ratio(s) that maximize TPS_output while meeting
TTFT P99 &lt; 500 ms and ITL P99 &lt; 50 ms.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a multi-panel figure with
one panel per request rate, each showing xPyD ratio on the X axis and metrics
on dual Y axes (TTFT/ITL on left, TPS on right). The Pareto frontier <span class="bcp14">SHOULD</span> be
highlighted.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="heterogeneous-parallelism-configuration">
<section id="section-6.3">
        <h3 id="name-heterogeneous-parallelism-c">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-heterogeneous-parallelism-c" class="section-name selfRef">Heterogeneous Parallelism Configuration</a>
        </h3>
<p id="section-6.3-1"><strong>Objective:</strong> To evaluate the fabric impact of using different parallelism
strategies on prefill vs. decode pools in a disaggregated configuration.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2"><strong>Procedure:</strong> Test the following parallelism configurations:<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-3.1">
            <p id="section-6.3-3.1.1">Prefill TP=8, Decode TP=8 (baseline, same parallelism)<a href="#section-6.3-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-3.2">
            <p id="section-6.3-3.2.1">Prefill TP=8, Decode TP=4 with DP_Attention=2 (reduced TP, added DP)<a href="#section-6.3-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-3.3">
            <p id="section-6.3-3.3.1">Prefill TP=4 with DP=2, Decode TP=2 with DP_Attention=4 (aggressive DP)<a href="#section-6.3-3.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-6.3-4"><strong>Measurement:</strong> Report the number of concurrent RDMA flows, aggregate bandwidth
(GB/s), TTFT (ms), and ITL (ms) at P50 and P99 for each configuration.<a href="#section-6.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prefill-queue-depth-impact-on-transfer-latency">
<section id="section-6.4">
        <h3 id="name-prefill-queue-depth-impact-">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-prefill-queue-depth-impact-" class="section-name selfRef">Prefill Queue Depth Impact on Transfer Latency</a>
        </h3>
<p id="section-6.4-1"><strong>Objective:</strong> To measure how queuing of prefill requests (due to compute
contention) affects KV cache transfer burstiness and fabric congestion.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
<p id="section-6.4-2"><strong>Procedure:</strong> Oversubscribe the prefill pool by submitting requests at a rate
exceeding prefill capacity. Measure the resulting KV cache transfer burst
characteristics: burst size, burst duration, inter-burst gap, and peak fabric
bandwidth demand. Vary the oversubscription ratio from 1.0x (saturated) to 2.0x
in 0.25x increments.<a href="#section-6.4-2" class="pilcrow">¶</a></p>
<p id="section-6.4-3"><strong>Measurement:</strong> Report burst size distribution, peak and average fabric
bandwidth, KV transfer latency P99, and ECN/PFC event counts as functions of
oversubscription ratio.<a href="#section-6.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-cat3">
<section id="section-7">
      <h2 id="name-test-category-3-moe-expert-">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-test-category-3-moe-expert-" class="section-name selfRef">Test Category 3: MoE Expert Parallelism Benchmarks</a>
      </h2>
<p id="section-7-1">Mixture-of-Experts models distribute expert sub-networks across GPUs and route
tokens to the appropriate experts via AllToAll communication. This section
benchmarks the fabric's ability to support the resulting fine-grained,
latency-sensitive inter-GPU traffic patterns.<a href="#section-7-1" class="pilcrow">¶</a></p>
<div id="alltoall-dispatch-throughput">
<section id="section-7.1">
        <h3 id="name-alltoall-dispatch-throughpu">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-alltoall-dispatch-throughpu" class="section-name selfRef">AllToAll Dispatch Throughput</a>
        </h3>
<p id="section-7.1-1"><strong>Objective:</strong> To determine the maximum AllToAll dispatch throughput for MoE
expert parallelism across the DUT fabric.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2"><strong>Procedure:</strong> Configure N GPUs in an EP group (e.g., N = 8, 16, 32, 64, 96).
Generate a synthetic MoE dispatch workload where each GPU sends token embeddings
to the experts selected by a top-k routing function (k=2 typical). Measure the
aggregate AllToAll bandwidth and per-dispatch latency for batch sizes of 1, 8,
32, 128, and 512 tokens, and EP group sizes of 8, 16, 32, 64, and 96.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1-3"><strong>Measurement:</strong> Report aggregate bandwidth (GB/s), per-dispatch latency (us)
at P50 and P99, and GPU idle time waiting for dispatch completion. The test <span class="bcp14">MUST</span>
be repeated a minimum of 20 times per configuration.<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<p id="section-7.1-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a heatmap with EP group size
on the Y axis, batch size on the X axis, and throughput (GB/s) as the color
dimension. A companion latency table <span class="bcp14">MUST</span> be included.<a href="#section-7.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="normal-vs-low-latency-dispatch-mode-comparison">
<section id="section-7.2">
        <h3 id="name-normal-vs-low-latency-dispa">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-normal-vs-low-latency-dispa" class="section-name selfRef">Normal vs. Low-Latency Dispatch Mode Comparison</a>
        </h3>
<p id="section-7.2-1"><strong>Objective:</strong> To compare fabric performance under Normal Dispatch (optimized
for prefill, dynamic shapes, incompatible with CUDA Graph) and Low-Latency
Dispatch (optimized for decode, fixed shapes, CUDA Graph compatible).<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2"><strong>Procedure:</strong> Execute identical MoE dispatch workloads in both modes for EP
group sizes of 8, 32, and 96 GPUs. For Normal Dispatch, use batch sizes of 128,
256, and 512 (typical prefill). For Low-Latency Dispatch, use batch sizes of 1,
4, 8, and 16 (typical decode).<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<p id="section-7.2-3"><strong>Measurement:</strong> Report per-dispatch latency (us) at P50, P95, P99 for each
mode. Report the latency ratio LL/Normal for equivalent EP sizes. Report the
fabric bandwidth utilization (%) for each mode.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="wide-expert-parallelism-scaling">
<section id="section-7.3">
        <h3 id="name-wide-expert-parallelism-sca">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-wide-expert-parallelism-sca" class="section-name selfRef">Wide Expert Parallelism Scaling</a>
        </h3>
<p id="section-7.3-1"><strong>Objective:</strong> To characterize AllToAll dispatch performance as EP group size
scales beyond a single node (wide EP), requiring inter-node fabric communication.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2"><strong>Procedure:</strong> Scale the EP group from intra-node only (EP=8) to wide EP
(EP=16, 32, 48, 64, 96 spanning 2, 4, 6, 8, 12 nodes). Use a fixed batch size
of 128 tokens and a representative MoE model configuration (256 experts, top-2
routing).<a href="#section-7.3-2" class="pilcrow">¶</a></p>
<p id="section-7.3-3"><strong>Measurement:</strong> Report total dispatch latency (us), inter-node bandwidth
(GB/s), and latency decomposition (intra-node vs. inter-node fraction). Report
the scaling efficiency: (EP=8 latency) / (EP=N latency) * (N/8).<a href="#section-7.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="expert-parallelism-and-kv-cache-transfer-contention">
<section id="section-7.4">
        <h3 id="name-expert-parallelism-and-kv-c">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-expert-parallelism-and-kv-c" class="section-name selfRef">Expert Parallelism and KV Cache Transfer Contention</a>
        </h3>
<p id="section-7.4-1"><strong>Objective:</strong> To measure the mutual interference between EP AllToAll dispatch
traffic and KV cache transfer traffic when both share the same fabric links.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<p id="section-7.4-2"><strong>Procedure:</strong> On a shared fabric, simultaneously execute: (a) continuous KV
cache transfers at a sustained rate (e.g., 50%, 75% of fabric capacity), and
(b) periodic EP AllToAll dispatches (one per MoE layer forward pass).<a href="#section-7.4-2" class="pilcrow">¶</a></p>
<p id="section-7.4-3"><strong>Measurement:</strong> Report KV_xfer_latency P99 (us) and EP_alltoall_latency P99
(us) for the isolated and contended cases. Report the contention penalty as the
ratio of contended P99 to isolated P99 for each traffic class. Report ECN/PFC
event counts during contention.<a href="#section-7.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-category-4-congestion-management-benchmarks">
<section id="section-8">
      <h2 id="name-test-category-4-congestion-">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-test-category-4-congestion-" class="section-name selfRef">Test Category 4: Congestion Management Benchmarks</a>
      </h2>
<p id="section-8-1">Inference traffic patterns differ from training in their burstiness,
heterogeneity (mixed KV cache transfers and EP dispatches), and latency
sensitivity.<a href="#section-8-1" class="pilcrow">¶</a></p>
<div id="ecn-marking-under-inference-incast">
<section id="section-8.1">
        <h3 id="name-ecn-marking-under-inference">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-ecn-marking-under-inference" class="section-name selfRef">ECN Marking Under Inference Incast</a>
        </h3>
<p id="section-8.1-1"><strong>Objective:</strong> To verify that ECN marking thresholds are correctly applied when
multiple prefill workers simultaneously transfer KV cache blocks to a single
decode worker (incast pattern).<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2"><strong>Procedure:</strong> Configure M prefill workers (M = 2, 4, 8, 16, 32) to
simultaneously transfer 16 MB KV cache blocks to a single decode worker port.
Repeat for ECN marking thresholds of 100 KB, 500 KB, 1 MB, and 5 MB. The DUT
is the individual leaf switch (DUT-S).<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3"><strong>Measurement:</strong> Report the ECN marking rate (fraction of marked packets), the
onset of marking, queue depth at marking onset, and aggregate throughput
achieved. Repeat a minimum of 20 times per configuration.<a href="#section-8.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pfc-behavior-under-bursty-kv-cache-transfers">
<section id="section-8.2">
        <h3 id="name-pfc-behavior-under-bursty-k">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-pfc-behavior-under-bursty-k" class="section-name selfRef">PFC Behavior Under Bursty KV Cache Transfers</a>
        </h3>
<p id="section-8.2-1"><strong>Objective:</strong> To characterize PFC PAUSE frame generation and propagation under
bursty KV cache transfer patterns typical of disaggregated serving.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2"><strong>Procedure:</strong> Generate KV cache transfer bursts: N_burst concurrent transfers
(N_burst = 4, 8, 16, 32), each of size 16 MB, arriving within a window of
T_arrival (100 us, 1 ms, 10 ms). Vary the PFC threshold from 10 KB to 1 MB.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<p id="section-8.2-3"><strong>Measurement:</strong> Report PFC frame count, total PAUSE duration (us),
head-of-line blocking delay imposed on other traffic classes (us), and KV cache
transfer completion time.<a href="#section-8.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="congestion-control-convergence-for-mixed-traffic">
<section id="section-8.3">
        <h3 id="name-congestion-control-converge">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-congestion-control-converge" class="section-name selfRef">Congestion Control Convergence for Mixed Traffic</a>
        </h3>
<p id="section-8.3-1"><strong>Objective:</strong> To measure the convergence time of DCQCN (or UET congestion
control) when KV cache transfer traffic and EP AllToAll dispatch traffic share
fabric capacity.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2"><strong>Procedure:</strong> Establish a sustained KV cache transfer at 80% of fabric
capacity. Introduce EP AllToAll dispatch traffic on the same fabric links.
Measure the convergence time to stable rate allocation. Repeat with the roles
reversed.<a href="#section-8.3-2" class="pilcrow">¶</a></p>
<p id="section-8.3-3"><strong>Measurement:</strong> Report convergence time (ms) to within 5% of steady-state
rates, steady-state bandwidth allocation between traffic classes, packet loss
during convergence, and Jain Fairness Index of the steady-state allocation.<a href="#section-8.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pfc-storm-and-deadlock-resilience">
<section id="section-8.4">
        <h3 id="name-pfc-storm-and-deadlock-resi">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-pfc-storm-and-deadlock-resi" class="section-name selfRef">PFC Storm and Deadlock Resilience</a>
        </h3>
<p id="section-8.4-1"><strong>Objective:</strong> To verify that the fabric does not enter a PFC storm or deadlock
condition under adversarial inference traffic patterns.<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<p id="section-8.4-2"><strong>Procedure:</strong> Per the companion training document, generate a PFC storm
scenario by creating circular buffer dependency across multiple switches.
Simultaneously inject KV cache transfer traffic on all affected paths. Monitor
for PFC storm propagation, deadlock, and recovery time. The test duration <span class="bcp14">MUST</span>
be at least 300 seconds.<a href="#section-8.4-2" class="pilcrow">¶</a></p>
<p id="section-8.4-3"><strong>Measurement:</strong> Report whether PFC storm occurred (yes/no), deadlock occurred
(yes/no), maximum PAUSE propagation depth (number of hops), maximum
zero-throughput duration (ms), and recovery time (ms).<a href="#section-8.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-category-5-request-routing-and-load-balancing">
<section id="section-9">
      <h2 id="name-test-category-5-request-rou">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-test-category-5-request-rou" class="section-name selfRef">Test Category 5: Request Routing and Load Balancing</a>
      </h2>
<p id="section-9-1">Inference serving introduces application-layer routing decisions that interact
with fabric-layer load balancing (ECMP, flowlet, packet spray).<a href="#section-9-1" class="pilcrow">¶</a></p>
<div id="kv-aware-request-routing-efficacy">
<section id="section-9.1">
        <h3 id="name-kv-aware-request-routing-ef">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-kv-aware-request-routing-ef" class="section-name selfRef">KV-Aware Request Routing Efficacy</a>
        </h3>
<p id="section-9.1-1"><strong>Objective:</strong> To measure the effectiveness of KV-aware request routing, where
the request router considers decode worker KV cache memory occupancy and fabric
path congestion when assigning requests.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2"><strong>Procedure:</strong> Configure a request router with KV-aware routing enabled. Submit
a sustained request stream at rates of 10, 50, 100, and 200 req/s. Compare
against round-robin routing (baseline).<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1-3"><strong>Measurement:</strong> Report the coefficient of variation (CV) of decode worker
memory utilization, P99 TTFT, P99 ITL, KV cache eviction rate, and Goodput for
both KV-aware and round-robin routing.<a href="#section-9.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prefix-aware-cache-hit-rate">
<section id="section-9.2">
        <h3 id="name-prefix-aware-cache-hit-rate">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-prefix-aware-cache-hit-rate" class="section-name selfRef">Prefix-Aware Cache Hit Rate</a>
        </h3>
<p id="section-9.2-1"><strong>Objective:</strong> To measure the fabric bandwidth savings achieved by prefix-aware
caching, where requests with common prefixes are routed to workers that already
hold the corresponding KV cache segment.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2-2"><strong>Procedure:</strong> Generate a request workload where P% of requests share a common
prefix of L tokens (P = 25%, 50%, 75%, 90%; L = 256, 512, 1024, 2048). Compare
against non-prefix-aware routing.<a href="#section-9.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2-3"><strong>Measurement:</strong> Report cache hit rate (%), fabric bandwidth reduction (%),
TTFT reduction (ms), and TPS improvement (%) for each (P, L) combination.<a href="#section-9.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ecmp-and-dynamic-load-balancing-under-inference-traffic">
<section id="section-9.3">
        <h3 id="name-ecmp-and-dynamic-load-balan">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-ecmp-and-dynamic-load-balan" class="section-name selfRef">ECMP and Dynamic Load Balancing Under Inference Traffic</a>
        </h3>
<p id="section-9.3-1"><strong>Objective:</strong> To evaluate fabric-layer load balancing effectiveness under
inference traffic patterns characterized by a mix of large KV cache flows and
small EP dispatch flows.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<p id="section-9.3-2"><strong>Procedure:</strong> Measure link utilization uniformity under: (a) KV cache transfers
only (large flows, 16 MB+), (b) EP AllToAll dispatches only (small flows,
&lt; 1 MB), (c) mixed KV cache and EP traffic.<a href="#section-9.3-2" class="pilcrow">¶</a></p>
<p id="section-9.3-3"><strong>Measurement:</strong> Report JFI, maximum link utilization (%), minimum link
utilization (%), and the oversubscription ratio for each scenario and load
balancing algorithm.<a href="#section-9.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="jain-fairness-index-for-decode-worker-utilization">
<section id="section-9.4">
        <h3 id="name-jain-fairness-index-for-dec">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-jain-fairness-index-for-dec" class="section-name selfRef">Jain Fairness Index for Decode Worker Utilization</a>
        </h3>
<p id="section-9.4-1"><strong>Objective:</strong> To measure how evenly the fabric distributes KV cache transfer
load across decode workers.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
<p id="section-9.4-2"><strong>Procedure:</strong> With N_D decode workers (N_D = 8, 16, 32, 64), submit a
sustained request stream and measure per-worker KV cache receive rate, GPU
utilization, and output TPS.<a href="#section-9.4-2" class="pilcrow">¶</a></p>
<p id="section-9.4-3"><strong>Measurement:</strong> Report JFI for KV cache receive rate, GPU utilization, and
output TPS. Report the max/min ratio for each metric.<a href="#section-9.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-category-6-latency-benchmarks">
<section id="section-10">
      <h2 id="name-test-category-6-latency-ben">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-test-category-6-latency-ben" class="section-name selfRef">Test Category 6: Latency Benchmarks</a>
      </h2>
<p id="section-10-1">Inference latency is the primary user-facing quality metric. This section
defines benchmarks that isolate the fabric's contribution to end-to-end
inference latency.<a href="#section-10-1" class="pilcrow">¶</a></p>
<div id="ttft-under-varying-prompt-lengths">
<section id="section-10.1">
        <h3 id="name-ttft-under-varying-prompt-l">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-ttft-under-varying-prompt-l" class="section-name selfRef">TTFT Under Varying Prompt Lengths</a>
        </h3>
<p id="section-10.1-1"><strong>Objective:</strong> To characterize TTFT as a function of prompt length, isolating
the fabric-dependent KV cache transfer component.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2"><strong>Procedure:</strong> Submit single requests (no concurrent load) with prompt lengths
of 128, 256, 512, 1024, 2048, 4096, 8192, and 16384 tokens. Measure TTFT and
decompose into T_prefill, T_transfer, and T_decode_init. The expected transfer
size for a 70B model at FP16 is approximately 0.33 MB per token.<a href="#section-10.1-2" class="pilcrow">¶</a></p>
<p id="section-10.1-3"><strong>Measurement:</strong> Report TTFT, T_transfer, and T_transfer/TTFT at P50, P95, P99
for each prompt length. The test <span class="bcp14">MUST</span> be repeated a minimum of 100 times per
prompt length.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
<p id="section-10.1-4"><strong>Reporting Format:</strong> Results <span class="bcp14">SHOULD</span> be reported as a line graph with prompt
length on the X axis and TTFT (ms) on the Y axis, with separate lines for P50
and P99. The T_transfer component <span class="bcp14">SHOULD</span> be shown as a shaded region.<a href="#section-10.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="itl-characterization-and-tail-latency">
<section id="section-10.2">
        <h3 id="name-itl-characterization-and-ta">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-itl-characterization-and-ta" class="section-name selfRef">ITL Characterization and Tail Latency</a>
        </h3>
<p id="section-10.2-1"><strong>Objective:</strong> To characterize inter-token latency distribution and identify
fabric-induced tail latency during the decode phase.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2"><strong>Procedure:</strong> Submit a single long-output request (e.g., 2048 output tokens)
and record the timestamp of each emitted token. Repeat under: (a) unloaded
fabric, (b) loaded fabric (50% of capacity), and (c) heavily loaded fabric (90%
of capacity plus concurrent EP dispatches).<a href="#section-10.2-2" class="pilcrow">¶</a></p>
<p id="section-10.2-3"><strong>Measurement:</strong> Report ITL at P50, P95, P99, P99.9, and maximum for each load
condition. Report the number of tokens exhibiting ITL &gt; 100 ms (stall events).
The test <span class="bcp14">MUST</span> generate at least 10,000 ITL samples per condition.<a href="#section-10.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="end-to-end-latency-under-multi-tenant-load">
<section id="section-10.3">
        <h3 id="name-end-to-end-latency-under-mu">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-end-to-end-latency-under-mu" class="section-name selfRef">End-to-End Latency Under Multi-Tenant Load</a>
        </h3>
<p id="section-10.3-1"><strong>Objective:</strong> To measure inference latency when multiple models or model
instances share the same fabric.<a href="#section-10.3-1" class="pilcrow">¶</a></p>
<p id="section-10.3-2"><strong>Procedure:</strong> Deploy two or more model instances on separate worker pools
sharing the same fabric. Submit requests to both instances concurrently.<a href="#section-10.3-2" class="pilcrow">¶</a></p>
<p id="section-10.3-3"><strong>Measurement:</strong> Report per-instance TTFT P99, ITL P99, and the interference
penalty: (multi-tenant metric - single-tenant metric) / single-tenant metric *
100%.<a href="#section-10.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="latency-sensitivity-to-fabric-congestion">
<section id="section-10.4">
        <h3 id="name-latency-sensitivity-to-fabr">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-latency-sensitivity-to-fabr" class="section-name selfRef">Latency Sensitivity to Fabric Congestion</a>
        </h3>
<p id="section-10.4-1"><strong>Objective:</strong> To establish the relationship between fabric congestion level and
inference latency degradation.<a href="#section-10.4-1" class="pilcrow">¶</a></p>
<p id="section-10.4-2"><strong>Procedure:</strong> Inject controlled background traffic on the fabric at levels from
0% to 95% of capacity in 5% increments. At each level, submit inference requests
at a fixed rate and measure TTFT and ITL.<a href="#section-10.4-2" class="pilcrow">¶</a></p>
<p id="section-10.4-3"><strong>Measurement:</strong> Report TTFT P99 and ITL P99 as functions of background traffic
level. Identify the inflection point at which latency begins to degrade
significantly. Report the latency degradation factor at 50%, 75%, and 90%
background load.<a href="#section-10.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-category-7-throughput-benchmarks">
<section id="section-11">
      <h2 id="name-test-category-7-throughput-">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-test-category-7-throughput-" class="section-name selfRef">Test Category 7: Throughput Benchmarks</a>
      </h2>
<p id="section-11-1">Inference throughput determines the cost-effectiveness of the serving
deployment.<a href="#section-11-1" class="pilcrow">¶</a></p>
<div id="aggregate-tokens-per-second">
<section id="section-11.1">
        <h3 id="name-aggregate-tokens-per-second">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-aggregate-tokens-per-second" class="section-name selfRef">Aggregate Tokens Per Second</a>
        </h3>
<p id="section-11.1-1"><strong>Objective:</strong> To determine the maximum sustained aggregate TPS achievable while
meeting latency SLOs.<a href="#section-11.1-1" class="pilcrow">¶</a></p>
<p id="section-11.1-2"><strong>Procedure:</strong> Increase the request arrival rate from 1 req/s to the point where
either TTFT P99 exceeds 500 ms or ITL P99 exceeds 50 ms. At each rate, measure
TPS_output, TPS_input, Goodput, and all latency KPIs.<a href="#section-11.1-2" class="pilcrow">¶</a></p>
<p id="section-11.1-3"><strong>Measurement:</strong> Report TPS_output, TPS_input, Goodput, TTFT P99, ITL P99, and
fabric utilization at the SLO-bounded throughput. Report the fabric utilization
at the SLO boundary as a key efficiency metric.<a href="#section-11.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="batch-size-scaling-and-continuous-batching-impact">
<section id="section-11.2">
        <h3 id="name-batch-size-scaling-and-cont">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-batch-size-scaling-and-cont" class="section-name selfRef">Batch Size Scaling and Continuous Batching Impact</a>
        </h3>
<p id="section-11.2-1"><strong>Objective:</strong> To measure the interaction between inference batch size,
continuous batching, and fabric transfer patterns.<a href="#section-11.2-1" class="pilcrow">¶</a></p>
<p id="section-11.2-2"><strong>Procedure:</strong> Configure the serving system with varying maximum batch sizes
(1, 4, 8, 16, 32, 64, 128). For each batch size, measure: (a) the number of
concurrent KV cache transfers, (b) aggregate fabric bandwidth consumed,
(c) TPS_output, and (d) TTFT P99. Enable continuous batching and repeat.<a href="#section-11.2-2" class="pilcrow">¶</a></p>
<p id="section-11.2-3"><strong>Measurement:</strong> Report TPS_output, TTFT P99, fabric bandwidth (GB/s), and peak
concurrent transfers for each batch size, with and without continuous batching.<a href="#section-11.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="goodput-under-preemption-and-eviction">
<section id="section-11.3">
        <h3 id="name-goodput-under-preemption-an">
<a href="#section-11.3" class="section-number selfRef">11.3. </a><a href="#name-goodput-under-preemption-an" class="section-name selfRef">Goodput Under Preemption and Eviction</a>
        </h3>
<p id="section-11.3-1"><strong>Objective:</strong> To measure the Goodput loss when fabric congestion forces KV
cache eviction or request preemption.<a href="#section-11.3-1" class="pilcrow">¶</a></p>
<p id="section-11.3-2"><strong>Procedure:</strong> Oversubscribe the system beyond the SLO-bounded throughput (at
110%, 125%, 150%, and 200% of the rate found in Test 11.1). Measure the rate of
KV cache evictions, request preemptions, and the resulting Goodput reduction.<a href="#section-11.3-2" class="pilcrow">¶</a></p>
<p id="section-11.3-3"><strong>Measurement:</strong> Report Goodput, eviction rate (evictions/s), preemption rate
(preemptions/s), wasted fabric bandwidth (GB/s), and the Goodput/TPS_output
ratio (efficiency).<a href="#section-11.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-category-8-scale-and-autoscaling">
<section id="section-12">
      <h2 id="name-test-category-8-scale-and-a">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-test-category-8-scale-and-a" class="section-name selfRef">Test Category 8: Scale and Autoscaling</a>
      </h2>
<p id="section-12-1">Inference serving clusters must scale dynamically to match request demand.<a href="#section-12-1" class="pilcrow">¶</a></p>
<div id="fabric-scale-limits-for-inference-clusters">
<section id="section-12.1">
        <h3 id="name-fabric-scale-limits-for-inf">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-fabric-scale-limits-for-inf" class="section-name selfRef">Fabric Scale Limits for Inference Clusters</a>
        </h3>
<p id="section-12.1-1"><strong>Objective:</strong> To determine the maximum inference cluster size supportable by
the DUT fabric while meeting performance requirements.<a href="#section-12.1-1" class="pilcrow">¶</a></p>
<p id="section-12.1-2"><strong>Procedure:</strong> Progressively scale the cluster from a minimal configuration
(e.g., 2 nodes, 16 GPUs) to the fabric's capacity (e.g., 1024 nodes, 8192
GPUs). At each scale point (following powers of two), measure KV cache transfer
throughput and latency, EP AllToAll dispatch latency, fabric control plane
convergence time, routing table size, and end-to-end TTFT and TPS.<a href="#section-12.1-2" class="pilcrow">¶</a></p>
<p id="section-12.1-3"><strong>Measurement:</strong> Report all KPIs at each scale point. Identify the scale limit
as the point where any KPI degrades by more than 10% from the
minimal-configuration baseline.<a href="#section-12.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="dynamic-autoscaling-response-time">
<section id="section-12.2">
        <h3 id="name-dynamic-autoscaling-respons">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-dynamic-autoscaling-respons" class="section-name selfRef">Dynamic Autoscaling Response Time</a>
        </h3>
<p id="section-12.2-1"><strong>Objective:</strong> To measure the time required for the fabric to accommodate
dynamic scaling of inference worker pools (adding/removing prefill or decode
workers).<a href="#section-12.2-1" class="pilcrow">¶</a></p>
<p id="section-12.2-2"><strong>Procedure:</strong> Starting from a stable serving state, trigger a scale-up event
(e.g., adding 4 decode nodes). Measure: (a) fabric convergence time, (b) time
from fabric convergence to first KV cache transfer on new nodes, (c) time to
reach steady-state throughput. Repeat for scale-down events.<a href="#section-12.2-2" class="pilcrow">¶</a></p>
<p id="section-12.2-3"><strong>Measurement:</strong> Report fabric convergence time (ms), first-transfer time (ms),
and time to steady-state (ms) for scale-up and scale-down events. Report any
packet loss or latency spikes during the scaling transition.<a href="#section-12.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="link-failure-convergence-impact-on-serving">
<section id="section-12.3">
        <h3 id="name-link-failure-convergence-im">
<a href="#section-12.3" class="section-number selfRef">12.3. </a><a href="#name-link-failure-convergence-im" class="section-name selfRef">Link Failure Convergence Impact on Serving</a>
        </h3>
<p id="section-12.3-1"><strong>Objective:</strong> To measure the impact of fabric link failures on inference
serving performance and the convergence time to restore full service.<a href="#section-12.3-1" class="pilcrow">¶</a></p>
<p id="section-12.3-2"><strong>Procedure:</strong> During sustained inference serving at 80% of SLO-bounded
throughput, fail a single fabric link on: (a) a leaf-spine link carrying KV
cache traffic, (b) a spine-spine link, (c) a link on the decode worker's leaf
switch. Measure traffic disruption and recovery time. Repeat for dual link
failures.<a href="#section-12.3-2" class="pilcrow">¶</a></p>
<p id="section-12.3-3"><strong>Measurement:</strong> Report traffic disruption duration (ms), convergence time (ms),
TTFT degradation during convergence (ms above baseline P99), TPS reduction
during convergence (%), and time to full recovery (ms). The test <span class="bcp14">MUST</span> be
repeated a minimum of 20 times per failure scenario.<a href="#section-12.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="test-category-9-soak-and-stability">
<section id="section-13">
      <h2 id="name-test-category-9-soak-and-st">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-test-category-9-soak-and-st" class="section-name selfRef">Test Category 9: Soak and Stability</a>
      </h2>
<p id="section-13-1">Long-running inference serving deployments must maintain performance without
degradation over time.<a href="#section-13-1" class="pilcrow">¶</a></p>
<div id="hour-sustained-inference-load">
<section id="section-13.1">
        <h3 id="name-24-hour-sustained-inference">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-24-hour-sustained-inference" class="section-name selfRef">24-Hour Sustained Inference Load</a>
        </h3>
<p id="section-13.1-1"><strong>Objective:</strong> To verify that the fabric maintains performance under continuous
inference serving load for 24 hours.<a href="#section-13.1-1" class="pilcrow">¶</a></p>
<p id="section-13.1-2"><strong>Procedure:</strong> Configure the SUT-E at 80% of the SLO-bounded throughput
determined in Test 11.1. Run a continuous request stream for 24 hours with a
realistic prompt length distribution. Sample the following metrics every 15
minutes: TTFT P99, ITL P99, TPS_output, KV_xfer_latency P99, fabric link
utilization, switch CPU/memory usage, NIC counters (RDMA retransmissions, QP
errors), and PFC/ECN event counts.<a href="#section-13.1-2" class="pilcrow">¶</a></p>
<p id="section-13.1-3"><strong>Measurement:</strong> Report the trend of all sampled metrics over the 24-hour
period. There <span class="bcp14">SHOULD</span> be zero NIC QP errors, zero routing flaps, and less than
1% variation in TTFT P99 over the test duration.<a href="#section-13.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="kv-cache-memory-leak-detection">
<section id="section-13.2">
        <h3 id="name-kv-cache-memory-leak-detect">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-kv-cache-memory-leak-detect" class="section-name selfRef">KV Cache Memory Leak Detection</a>
        </h3>
<p id="section-13.2-1"><strong>Objective:</strong> To detect memory leaks in the KV cache management subsystem that
may manifest as fabric performance degradation over time.<a href="#section-13.2-1" class="pilcrow">¶</a></p>
<p id="section-13.2-2"><strong>Procedure:</strong> Monitor GPU memory, CPU memory, NIC registered memory regions,
and RDMA memory region counts on all prefill and decode workers during the
24-hour soak test. Record the number of active KV cache pages, RDMA memory
registrations, and pinned memory at each sampling interval.<a href="#section-13.2-2" class="pilcrow">¶</a></p>
<p id="section-13.2-3"><strong>Measurement:</strong> Report the trend of each monitored metric. Flag any monotonic
increase as a potential leak. Report the maximum observed memory usage and the
usage at the end of the 24-hour period.<a href="#section-13.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="long-running-serving-stability">
<section id="section-13.3">
        <h3 id="name-long-running-serving-stabil">
<a href="#section-13.3" class="section-number selfRef">13.3. </a><a href="#name-long-running-serving-stabil" class="section-name selfRef">Long-Running Serving Stability</a>
        </h3>
<p id="section-13.3-1"><strong>Objective:</strong> To verify that fabric-dependent components remain stable under
continuous inference serving.<a href="#section-13.3-1" class="pilcrow">¶</a></p>
<p id="section-13.3-2"><strong>Procedure:</strong> During the 24-hour soak test, monitor: NIC QP state transitions,
switch buffer utilization trend, FEC error rate trend, BGP/OSPF adjacency
stability, and RDMA retransmission rate. At the 12-hour mark, trigger a
controlled perturbation (single link flap) and verify recovery.<a href="#section-13.3-2" class="pilcrow">¶</a></p>
<p id="section-13.3-3"><strong>Measurement:</strong> Report the count of any QP state transitions, maximum switch
buffer utilization, FEC error trend, adjacency flap count, and RDMA
retransmission count. Report the recovery time from the 12-hour link flap
perturbation.<a href="#section-13.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="reporting">
<section id="section-14">
      <h2 id="name-reporting-format">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-reporting-format" class="section-name selfRef">Reporting Format</a>
      </h2>
<p id="section-14-1">All test results <span class="bcp14">MUST</span> be reported following the conventions established in RFC
2544 Section 26. In addition, the following inference-specific reporting
requirements apply:<a href="#section-14-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-14-2.1">
          <p id="section-14-2.1.1"><strong>System Configuration Report:</strong> The report <span class="bcp14">MUST</span> include: model name and
parameter count, parallelism strategy (TP, DP, EP, PP configuration for both
prefill and decode pools), xPyD ratio, inference serving framework name and
version, KV cache transfer library name and version, accelerator type and
count, NIC type and firmware version, switch ASIC and software version, fabric
topology, and link speeds.<a href="#section-14-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-14-2.2">
          <p id="section-14-2.2.1"><strong>Workload Characterization Report:</strong> The report <span class="bcp14">MUST</span> include: prompt length
distribution (mean, P50, P99, distribution type), output length distribution,
request arrival rate and distribution, number of concurrent requests, and
prefix sharing percentage.<a href="#section-14-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-14-2.3">
          <p id="section-14-2.3.1"><strong>Results Reporting:</strong> For each test, results <span class="bcp14">MUST</span> include: the specific test
identifier (e.g., Test 5.1), the DUT/SUT configuration tested, the number of
trials, all measured KPI values with confidence intervals, and any anomalies
observed.<a href="#section-14-2.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<span id="name-reporting-format-requiremen"></span><div id="tab-reporting">
<table class="center" id="table-6">
        <caption>
<a href="#table-6" class="selfRef">Table 6</a>:
<a href="#name-reporting-format-requiremen" class="selfRef">Reporting Format Requirements</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Report Element</th>
            <th class="text-left" rowspan="1" colspan="1">Format</th>
            <th class="text-left" rowspan="1" colspan="1">Required?</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">System Configuration</td>
            <td class="text-left" rowspan="1" colspan="1">Structured table per above</td>
            <td class="text-left" rowspan="1" colspan="1">Yes (required)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Workload Parameters</td>
            <td class="text-left" rowspan="1" colspan="1">Structured table per above</td>
            <td class="text-left" rowspan="1" colspan="1">Yes (required)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">KPI Summary Table</td>
            <td class="text-left" rowspan="1" colspan="1">Table with all measured KPIs</td>
            <td class="text-left" rowspan="1" colspan="1">Yes (required)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Latency Distribution Plots</td>
            <td class="text-left" rowspan="1" colspan="1">CDF or histogram per test section</td>
            <td class="text-left" rowspan="1" colspan="1">Recommended</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Throughput vs. Scale Graphs</td>
            <td class="text-left" rowspan="1" colspan="1">Line chart per test section</td>
            <td class="text-left" rowspan="1" colspan="1">Recommended</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Fabric Health Indicators</td>
            <td class="text-left" rowspan="1" colspan="1">Table per Section 4.4</td>
            <td class="text-left" rowspan="1" colspan="1">Yes (required)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Raw Data Appendix</td>
            <td class="text-left" rowspan="1" colspan="1">Machine-readable format (CSV, JSON)</td>
            <td class="text-left" rowspan="1" colspan="1">Optional</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-15">
      <h2 id="name-security-considerations">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-15-1">This document defines benchmarking methodologies for controlled laboratory
testing. All tests <span class="bcp14">MUST</span> be conducted in isolated test environments that are not
connected to production networks or the public Internet. The security
considerations from <span>[<a href="#RFC2544" class="cite xref">RFC2544</a>]</span> and <span>[<a href="#RFC6815" class="cite xref">RFC6815</a>]</span> apply.<a href="#section-15-1" class="pilcrow">¶</a></p>
<p id="section-15-2">Additionally, implementers <span class="bcp14">SHOULD</span> be aware that RDMA-based KV cache transfer
provides direct memory access between hosts; all RDMA connections in the test
environment <span class="bcp14">MUST</span> use authenticated QPs where supported. The test results
themselves may reveal performance characteristics that could inform
denial-of-service attack vectors; results <span class="bcp14">SHOULD</span> be treated as sensitive when
applicable.<a href="#section-15-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-16">
      <h2 id="name-iana-considerations">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-16-1">This memo includes no request to IANA.<a href="#section-16-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-combined-references">
<section id="section-17">
      <h2 id="name-references">
<a href="#section-17" class="section-number selfRef">17. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-17.1">
        <h3 id="name-normative-references">
<a href="#section-17.1" class="section-number selfRef">17.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC1242">[RFC1242]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Benchmarking Terminology for Network Interconnection Devices"</span>, <span class="seriesInfo">RFC 1242</span>, <span class="seriesInfo">DOI 10.17487/RFC1242</span>, <time datetime="1991-07" class="refDate">July 1991</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1242">https://www.rfc-editor.org/rfc/rfc1242</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2544">[RFC2544]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span> and <span class="refAuthor">J. McQuaid</span>, <span class="refTitle">"Benchmarking Methodology for Network Interconnect Devices"</span>, <span class="seriesInfo">RFC 2544</span>, <span class="seriesInfo">DOI 10.17487/RFC2544</span>, <time datetime="1999-03" class="refDate">March 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2544">https://www.rfc-editor.org/rfc/rfc2544</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2889">[RFC2889]</dt>
        <dd>
<span class="refAuthor">Mandeville, R.</span> and <span class="refAuthor">J. Perser</span>, <span class="refTitle">"Benchmarking Methodology for LAN Switching Devices"</span>, <span class="seriesInfo">RFC 2889</span>, <span class="seriesInfo">DOI 10.17487/RFC2889</span>, <time datetime="2000-08" class="refDate">August 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2889">https://www.rfc-editor.org/rfc/rfc2889</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6349">[RFC6349]</dt>
        <dd>
<span class="refAuthor">Constantine, B.</span>, <span class="refAuthor">Forget, G.</span>, <span class="refAuthor">Geib, R.</span>, and <span class="refAuthor">R. Schrage</span>, <span class="refTitle">"Framework for TCP Throughput Testing"</span>, <span class="seriesInfo">RFC 6349</span>, <span class="seriesInfo">DOI 10.17487/RFC6349</span>, <time datetime="2011-08" class="refDate">August 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6349">https://www.rfc-editor.org/rfc/rfc6349</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-17.2">
        <h3 id="name-informative-references">
<a href="#section-17.2" class="section-number selfRef">17.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="DISTSERVE">[DISTSERVE]</dt>
        <dd>
<span class="refAuthor">Zhong, Y.</span>, <span class="refTitle">"DistServe: Disaggregating Prefill and Decoding for Goodput-optimized Large Language Model Serving"</span>, <span class="refContent">OSDI 2024</span>, <time datetime="2024" class="refDate">2024</time>. </dd>
<dd class="break"></dd>
<dt id="EP-COMM">[EP-COMM]</dt>
        <dd>
<span class="refTitle">"DeepEP: An Efficient Expert-Parallel Communication Library"</span>, <time datetime="2025" class="refDate">2025</time>. </dd>
<dd class="break"></dd>
<dt id="K8S-INF">[K8S-INF]</dt>
        <dd>
<span class="refTitle">"llm-d: Kubernetes-Native Distributed LLM Inference"</span>, <time datetime="2025" class="refDate">2025</time>. </dd>
<dd class="break"></dd>
<dt id="LMCACHE">[LMCACHE]</dt>
        <dd>
<span class="refAuthor">LMCache Project</span>, <span class="refTitle">"LMCache: Hierarchical KV Cache Management for Inference"</span>, <time datetime="2025" class="refDate">2025</time>. </dd>
<dd class="break"></dd>
<dt id="RFC6815">[RFC6815]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refAuthor">Dubray, K.</span>, <span class="refAuthor">McQuaid, J.</span>, and <span class="refAuthor">A. Morton</span>, <span class="refTitle">"Applicability Statement for RFC 2544: Use on Production Networks Considered Harmful"</span>, <span class="seriesInfo">RFC 6815</span>, <span class="seriesInfo">DOI 10.17487/RFC6815</span>, <time datetime="2012-11" class="refDate">November 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6815">https://www.rfc-editor.org/rfc/rfc6815</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7432">https://www.rfc-editor.org/rfc/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SGLANG">[SGLANG]</dt>
        <dd>
<span class="refTitle">"SGLang: Efficient Execution of Structured Language Model Programs"</span>, <time datetime="2024" class="refDate">2024</time>. </dd>
<dd class="break"></dd>
<dt id="TERMINOLOGY">[TERMINOLOGY]</dt>
        <dd>
<span class="refTitle">"AI Fabric Benchmarking Terminology"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-calabria-bmwg-ai-fabric-terminology-00</span>, <time datetime="2026" class="refDate">2026</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-calabria-bmwg-ai-fabric-terminology-00">https://datatracker.ietf.org/doc/html/draft-calabria-bmwg-ai-fabric-terminology-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TRAINING-BENCH">[TRAINING-BENCH]</dt>
        <dd>
<span class="refTitle">"Benchmarking Methodology for AI Training Network Fabrics"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-calabria-bmwg-ai-fabric-training-bench-00</span>, <time datetime="2026" class="refDate">2026</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-calabria-bmwg-ai-fabric-training-bench-00">https://datatracker.ietf.org/doc/html/draft-calabria-bmwg-ai-fabric-training-bench-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="UEC-SPEC">[UEC-SPEC]</dt>
        <dd>
<span class="refAuthor">Ultra Ethernet Consortium</span>, <span class="refTitle">"UEC Specification 1.0"</span>, <time datetime="2024" class="refDate">2024</time>. </dd>
<dd class="break"></dd>
<dt id="VLLM">[VLLM]</dt>
      <dd>
<span class="refAuthor">Kwon, W.</span>, <span class="refTitle">"Efficient Memory Management for Large Language Model Serving with PagedAttention"</span>, <span class="refContent">Proceedings of the ACM SIGOPS 29th Symposium on Operating Systems Principles</span>, <time datetime="2023" class="refDate">2023</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="kpi-to-test-mapping-summary">
<section id="appendix-A">
      <h2 id="name-kpi-to-test-mapping-summary">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-kpi-to-test-mapping-summary" class="section-name selfRef">KPI-to-Test Mapping Summary</a>
      </h2>
<p id="appendix-A-1">The following table provides a cross-reference from each KPI defined in
<a href="#kpi-framework" class="auto internal xref">Section 4</a> to the test(s) in which it is measured.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<span id="name-kpi-to-test-mapping"></span><div id="tab-kpi-mapping">
<table class="center" id="table-7">
        <caption>
<a href="#table-7" class="selfRef">Table 7</a>:
<a href="#name-kpi-to-test-mapping" class="selfRef">KPI-to-Test Mapping</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">KPI</th>
            <th class="text-left" rowspan="1" colspan="1">Primary Test(s)</th>
            <th class="text-left" rowspan="1" colspan="1">DUT/SUT</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">TTFT</td>
            <td class="text-left" rowspan="1" colspan="1">6.1, 6.2, 10.1, 10.3</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ITL</td>
            <td class="text-left" rowspan="1" colspan="1">10.2, 10.3, 10.4</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">TPS_output</td>
            <td class="text-left" rowspan="1" colspan="1">6.2, 11.1, 11.2, 11.3</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">TPS_input</td>
            <td class="text-left" rowspan="1" colspan="1">11.1</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Goodput</td>
            <td class="text-left" rowspan="1" colspan="1">11.1, 11.3</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">KV_xfer_latency</td>
            <td class="text-left" rowspan="1" colspan="1">5.2, 5.3, 6.1, 6.4</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-N, DUT-PD</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">KV_xfer_bandwidth</td>
            <td class="text-left" rowspan="1" colspan="1">5.1, 5.3, 5.4</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-N, DUT-PD</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">EP_alltoall_latency</td>
            <td class="text-left" rowspan="1" colspan="1">7.1, 7.2, 7.3, 7.4</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">EP_alltoall_bandwidth</td>
            <td class="text-left" rowspan="1" colspan="1">7.1, 7.3</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Fabric_FCT</td>
            <td class="text-left" rowspan="1" colspan="1">5.2, 5.3</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Buffer_utilization</td>
            <td class="text-left" rowspan="1" colspan="1">8.1, 8.2</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-S</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ECN_marking_rate</td>
            <td class="text-left" rowspan="1" colspan="1">8.1, 8.3</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-S</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">PFC_frame_count</td>
            <td class="text-left" rowspan="1" colspan="1">8.2, 8.4</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-S</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Link_utilization</td>
            <td class="text-left" rowspan="1" colspan="1">5.3, 9.3, 12.1</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Packet_drop_rate</td>
            <td class="text-left" rowspan="1" colspan="1">8.1, 8.2, 12.3</td>
            <td class="text-left" rowspan="1" colspan="1">DUT-F</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Request_Rate</td>
            <td class="text-left" rowspan="1" colspan="1">11.1</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Prefix Cache Hit Rate</td>
            <td class="text-left" rowspan="1" colspan="1">9.2</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">JFI (Decode Worker)</td>
            <td class="text-left" rowspan="1" colspan="1">9.4</td>
            <td class="text-left" rowspan="1" colspan="1">SUT-E</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="inference-serving-framework-capability-categories-informational">
<section id="appendix-B">
      <h2 id="name-inference-serving-framework">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-inference-serving-framework" class="section-name selfRef">Inference Serving Framework Capability Categories (Informational)</a>
      </h2>
<p id="appendix-B-1">This appendix describes the inference serving framework capability categories
relevant to AI fabric benchmarking. This appendix is intended to guide
documentation of SUT-E configurations and is NOT normative. Implementers using
a Software Workload Emulator (SUT-E tests) <span class="bcp14">SHOULD</span> document which of the
following capabilities their serving framework supports.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<span id="name-framework-capability-catego"></span><div id="tab-framework-caps">
<table class="center" id="table-8">
        <caption>
<a href="#table-8" class="selfRef">Table 8</a>:
<a href="#name-framework-capability-catego" class="selfRef">Framework Capability Categories</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Capability Category</th>
            <th class="text-left" rowspan="1" colspan="1">Description</th>
            <th class="text-left" rowspan="1" colspan="1">Relevance to Fabric Benchmarking</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Disaggregated Prefill/Decode (PD)</td>
            <td class="text-left" rowspan="1" colspan="1">Physical separation of prefill and decode execution across different accelerator pools</td>
            <td class="text-left" rowspan="1" colspan="1">Determines whether DUT-PD topology tests apply (Section 6)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">KV Cache Transfer Protocol</td>
            <td class="text-left" rowspan="1" colspan="1">Protocol and library used for prefill-to-decode KV state transfer (one-sided PUT, two-sided SEND/RECV, GPU-initiated)</td>
            <td class="text-left" rowspan="1" colspan="1">Determines RDMA verb types under test and applicable frame formats (Appendix C)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">MoE Expert Parallelism (EP) Support</td>
            <td class="text-left" rowspan="1" colspan="1">Distribution of MoE expert sub-networks across GPUs and AllToAll dispatch mode support</td>
            <td class="text-left" rowspan="1" colspan="1">Determines whether MoE EP tests apply (Section 7)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Continuous Batching</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamic request admission to active inference batches</td>
            <td class="text-left" rowspan="1" colspan="1">Affects request arrival rate distributions and load balancing tests (Section 9)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Prefix / KV Cache Sharing</td>
            <td class="text-left" rowspan="1" colspan="1">Reuse of KV cache segments for requests with common prefixes</td>
            <td class="text-left" rowspan="1" colspan="1">Determines applicability of prefix cache hit rate test (Section 9.2)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">RDMA Transport Support</td>
            <td class="text-left" rowspan="1" colspan="1">Underlying transport(s) supported: RoCEv2, UET, or other</td>
            <td class="text-left" rowspan="1" colspan="1">Must be documented; affects congestion management test interpretation (Section 8)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">GPU-Initiated Networking (GIN) Support</td>
            <td class="text-left" rowspan="1" colspan="1">Ability for GPU threads to directly initiate RDMA operations without CPU involvement</td>
            <td class="text-left" rowspan="1" colspan="1">Affects RDMA primitive choice in MoE dispatch tests (Section 7)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Kubernetes / Orchestration Integration</td>
            <td class="text-left" rowspan="1" colspan="1">Native support for container-based deployment and horizontal scaling</td>
            <td class="text-left" rowspan="1" colspan="1">Relevant for autoscaling tests (Section 12.2)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Maximum Reported Scale</td>
            <td class="text-left" rowspan="1" colspan="1">Maximum cluster scale at which the framework has been validated</td>
            <td class="text-left" rowspan="1" colspan="1">Documents applicability of fabric scale tests</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="appendix-B-3">NOTE: Implementers <span class="bcp14">MUST</span> document the specific framework name, version, and
configuration in all test reports. Results obtained with different frameworks
are not directly comparable; framework identity is a required reporting
parameter per <a href="#reporting" class="auto internal xref">Section 14</a>.<a href="#appendix-B-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="kv-cache-transfer-frame-format">
<section id="appendix-C">
      <h2 id="name-kv-cache-transfer-frame-for">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-kv-cache-transfer-frame-for" class="section-name selfRef">KV Cache Transfer Frame Format</a>
      </h2>
<p id="appendix-C-1">This appendix defines the reference frame formats for KV cache transfer
benchmarking over RoCEv2. The frame format follows the standard RoCEv2
encapsulation with one-sided RDMA WRITE (PUT) operations.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<span id="name-rocev2-kv-cache-transfer-fr"></span><div id="fig-roce-frame">
<figure id="figure-2">
        <div class="alignLeft art-text artwork" id="appendix-C-2.1">
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Destination MAC Address (bytes 0-3)               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Destination MAC (bytes 4-5)  |  Source MAC Address (0-1)     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 Source MAC Address (bytes 2-5)                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   EtherType = 0x0800/0x86DD   |  DSCP  |ECN|      ...        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                IPv4/IPv6 Header (20 or 40 bytes)              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Src Port (entropy)      |  Dst Port = 4791 (RoCEv2)    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          UDP Length           |          UDP Checksum         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | OpCode=RDMA_WRITE(0x0A) |SE|M| Pad |TVer|       PKey        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Destination QP Number (24 bits)         |A| Reserved |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             Packet Sequence Number (PSN, 24 bits)             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                 RETH: Virtual Address (64 bits)               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Remote Key (R_Key, 32 bits)                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     DMA Length (32 bits)                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |           KV Cache Payload (variable, up to MTU)              |
   |            (key/value attention state data)                   |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        ICRC (4 bytes)                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-rocev2-kv-cache-transfer-fr" class="selfRef">RoCEv2 KV Cache Transfer Frame (One-Sided RDMA WRITE)</a>
        </figcaption></figure>
</div>
<p id="appendix-C-3">Notes: The UDP Source Port <span class="bcp14">SHOULD</span> use entropy-based values for ECMP load
distribution. The RETH (RDMA Extended Transport Header) carries the remote
virtual address, remote key, and DMA length for the one-sided WRITE operation.
For KV cache transfers, the DMA Length field indicates the size of the KV cache
block being transferred. Typical MTU for RoCEv2 is 4096 bytes; larger KV cache
blocks (e.g., 64 KB pages) are segmented into multiple packets by the NIC. For
PUT-with-signal operations, the last packet in the transfer includes an RDMA
WRITE with Immediate Data (OpCode 0x0B) to signal completion to the decode
worker.<a href="#appendix-C-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="moe-alltoall-communication-pattern">
<section id="appendix-D">
      <h2 id="name-moe-alltoall-communication-">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-moe-alltoall-communication-" class="section-name selfRef">MoE AllToAll Communication Pattern</a>
      </h2>
<p id="appendix-D-1">This appendix describes the AllToAll communication pattern used for MoE expert
parallelism dispatch and its fabric-level traffic characteristics. In a
Mixture-of-Experts model with M total experts distributed across N GPUs (each
GPU holds M/N experts), a single MoE layer forward pass generates an AllToAll
communication pattern where each GPU sends a variable-size payload to every
other GPU.<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<span id="name-moe-dispatch-traffic-charac"></span><div id="tab-moe-dispatch">
<table class="center" id="table-9">
        <caption>
<a href="#table-9" class="selfRef">Table 9</a>:
<a href="#name-moe-dispatch-traffic-charac" class="selfRef">MoE Dispatch Traffic Characteristics by Mode</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Parameter</th>
            <th class="text-left" rowspan="1" colspan="1">Normal Dispatch (Prefill)</th>
            <th class="text-left" rowspan="1" colspan="1">Low-Latency Dispatch (Decode)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Batch Size</td>
            <td class="text-left" rowspan="1" colspan="1">128 - 512 tokens</td>
            <td class="text-left" rowspan="1" colspan="1">1 - 16 tokens</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Payload per GPU pair</td>
            <td class="text-left" rowspan="1" colspan="1">Variable (depends on routing)</td>
            <td class="text-left" rowspan="1" colspan="1">Fixed (padded to max)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Shape Compatibility</td>
            <td class="text-left" rowspan="1" colspan="1">Dynamic (symbolic)</td>
            <td class="text-left" rowspan="1" colspan="1">Static (CUDA Graph)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">QP Parallelism</td>
            <td class="text-left" rowspan="1" colspan="1">24 QPs per connection</td>
            <td class="text-left" rowspan="1" colspan="1">8 - 16 QPs per connection</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">RDMA Primitive</td>
            <td class="text-left" rowspan="1" colspan="1">Two-sided SEND/RECV or one-sided PUT</td>
            <td class="text-left" rowspan="1" colspan="1">One-sided PUT (GPU-direct RDMA, GIN)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">GPU Initiation</td>
            <td class="text-left" rowspan="1" colspan="1">CPU-initiated or GIN</td>
            <td class="text-left" rowspan="1" colspan="1">GIN (device-initiated, GPU-to-NIC direct)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Typical per-dispatch size</td>
            <td class="text-left" rowspan="1" colspan="1">1 - 10 MB aggregate</td>
            <td class="text-left" rowspan="1" colspan="1">10 KB - 1 MB aggregate</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Dispatch Frequency</td>
            <td class="text-left" rowspan="1" colspan="1">Once per MoE layer (prefill)</td>
            <td class="text-left" rowspan="1" colspan="1">Once per MoE layer per token (decode)</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Latency Target</td>
            <td class="text-left" rowspan="1" colspan="1">&lt; 1 ms per dispatch</td>
            <td class="text-left" rowspan="1" colspan="1">&lt; 200 us per dispatch</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="appendix-D-3">For a representative large-scale MoE model (256 experts, top-2 routing,
hidden_dim=7168, EP=96 across 12 nodes), the inter-node traffic per MoE layer
dispatch is approximately:<a href="#appendix-D-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-D-4.1">
          <p id="appendix-D-4.1.1">Normal Dispatch (prefill, batch=256): 256 * 2 * 7168 * 2 bytes / 96 GPUs
= ~76 KB per GPU pair, ~870 MB aggregate across all pairs.<a href="#appendix-D-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-D-4.2">
          <p id="appendix-D-4.2.1">Low-Latency Dispatch (decode, batch=8): 8 * 2 * 7168 * 2 bytes / 96 GPUs
= ~2.4 KB per GPU pair, ~27 MB aggregate.<a href="#appendix-D-4.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="appendix-D-5">With 61 MoE layers and a decode iteration time target of ~30 ms, the decode
phase requires 61 AllToAll dispatches within 30 ms, yielding ~2,000 dispatches
per second per decode step, consuming approximately 54 GB/s aggregate inter-node
bandwidth for the Low-Latency Dispatch path.<a href="#appendix-D-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="appendix-E">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-E-1">Contributions and review are solicited from the BMWG mailing list
(bmwg@ietf.org) and the broader AI networking community. The BMWG chairs and
Area Director are identified at https://datatracker.ietf.org/group/bmwg/about/.<a href="#appendix-E-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-F">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Fernando Calabria</span></div>
<div dir="auto" class="left"><span class="org">Cisco</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:fcalabri@cisco.com" class="email">fcalabri@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Carlos Pignataro</span></div>
<div dir="auto" class="left"><span class="org">Blue Fern Consulting</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:carlos@bluefern.consulting" class="email">carlos@bluefern.consulting</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Qin Wu</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bill.wu@huawei.com" class="email">bill.wu@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Giuseppe Fioccola</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:giuseppe.fioccola@huawei.com" class="email">giuseppe.fioccola@huawei.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
